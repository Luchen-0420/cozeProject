# ä¸€ã€è¯¾ç¨‹ç®€ä»‹

## 1.æ•™ç¨‹ç®€ä»‹

å®ç°æ”¶è—å†…å®¹è‡³é£ä¹¦è¡¨æ ¼ã€‚

## 2.æœ¬è¯¾ç¨‹å°†ä¼šå­¦åˆ°ä»€ä¹ˆ

1. cozeå·¥ä½œæµæ­å»º
2. è‡ªå®šä¹‰æ’ä»¶è°ƒç”¨internlm2.5-20b-0719æ¨¡å‹
3. å¦‚ä½•åœ¨botå†…100%è°ƒç”¨å·¥ä½œæµ
4. å¦‚ä½•åœ¨é£ä¹¦æœºå™¨äºº/å¾®ä¿¡è®¢é˜…å·/å…¬ä¼—å·ä¸­ä½¿ç”¨
5. ï¼ˆè¿›é˜¶æ•™ç¨‹ï¼‰å¾ªç¯èŠ‚ç‚¹çš„ä½¿ç”¨
6. ä¸€äº›å…³äºé£ä¹¦çš„è¡¥å……

# äºŒã€å‡†å¤‡å·¥ä½œ

## 1. å¼€é€šcozeä¸“ä¸šç‰ˆ

æ‰“å¼€[cozeå›½å†…ç«™ç‚¹](https://www.coze.cn/)

ç”±äºåç»­æˆ‘ä»¬éœ€è¦è°ƒè¯•botï¼Œbot apiä¸€å¤©é™åˆ¶100æ¬¡ï¼Œæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå¯ä»¥é€‰æ‹©æ€§å¼€é€šä¸“ä¸šç‰ˆã€‚æœ¬æ¬¡è¯¾ç¨‹çš„å›¢é˜Ÿç©ºé—´çš†ä¸ºä¸“ä¸šç‰ˆå›¢é˜Ÿç©ºé—´ã€‚

![cozeé¦–é¡µ](https://github.com/user-attachments/assets/7c818ef8-77f6-47f6-91a4-feeb12f853af)

![ä¸“ä¸šç‰ˆè´­ä¹°å…¥å£](https://github.com/user-attachments/assets/901a9aba-0ab2-4ddd-99ee-d97fac2ac6d0)

**æ³¨æ„ï¼Œè¶…å‡ºåæ˜¯è‡ªåŠ¨æŒ‰é‡è®¡è´¹ï¼Œåä»˜æ¬¾çš„**

![è´­ä¹°é¡µé¢](https://github.com/user-attachments/assets/2e322381-a2ac-4bdd-99da-6c9f92aa366f)

**å¦‚æœå·²ç»åœ¨åŸºç¡€ç‰ˆåšäº†ï¼Œæƒ³å†å¼€é€šä¸“ä¸šç‰ˆï¼Œè¯·çœ‹æœ¬æ®µ**

å†æ¬¡ç‚¹å‡»"å›¾æ ‡"å°†åŸºç¡€ç‰ˆçš„èµ„æºå¤åˆ¶è¿‡æ¥ã€‚

![å¤åˆ¶1](https://github.com/user-attachments/assets/8a5b4c60-876d-45f3-bf83-42bf3b19da66)

![å¤åˆ¶2](https://github.com/user-attachments/assets/c9e4eff5-ff55-4936-9779-38b7ebf853c3)

åŸºç¡€ç‰ˆç”¨æˆ·åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![åŸºç¡€ç‰ˆç”¨æˆ·å](https://github.com/user-attachments/assets/723c3e77-fac5-44de-b598-243d04a47201)

å¤åˆ¶æˆæƒé“¾æ¥åï¼Œå…ˆé€€å‡ºä¸“ä¸šç‰ˆï¼Œç™»å½•åŸºç¡€ç‰ˆåï¼Œé»è´´é“¾æ¥è¿›è¡Œæˆæƒã€‚

![æˆæƒ1](https://github.com/user-attachments/assets/6917927d-c31b-42e3-8eb3-a7d47923f93e)

![æˆæƒ2](https://github.com/user-attachments/assets/ae94b0c1-6812-4ed8-a0cf-5564ac420297)

æˆæƒå®Œæˆåï¼Œé€€å‡ºåŸºç¡€ç‰ˆï¼Œé‡æ–°ç™»å½•ä¸“ä¸šç‰ˆã€‚ç‚¹å¼€"å·¥ä½œç©ºé—´"ï¼Œå¯ä»¥çœ‹åˆ°åŸºç¡€ç‰ˆçš„èµ„æºå·²ç»åœ¨ç©ºé—´å†…äº†ã€‚

![å¤åˆ¶æˆåŠŸ](https://github.com/user-attachments/assets/a50438ae-b057-468d-9140-e68cad2ccdcf)

## 2. æ–°å»ºé£ä¹¦å¤šç»´è¡¨æ ¼

å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œè¿›è¡Œä¿®æ”¹ã€‚ä»¥ä¸‹ä»…ä¸ªäººåœ¨è®¾è®¡å­—æ®µæ—¶çš„ä¸€äº›è€ƒè™‘å…ƒç´ ã€‚

### 2.1 è¡¨æ ¼å­—æ®µåè®¾ç½®å‰æ€è€ƒä¸ºä»€ä¹ˆè¦æ”¶è—è¿™ç¯‡æ–‡ç« 

â‘  å±äºä»€ä¹ˆé¢†åŸŸï¼Œå±äºä»€ä¹ˆæ€§è´¨ï¼ˆæ‰«ç›²ã€çº¯æŠ€æœ¯ã€å®æ“....ï¼‰ï¼Œä»€ä¹ˆé˜¶æ®µï¼ˆåˆçº§ã€ä¸­çº§ã€è¿›é˜¶....ï¼‰ç­‰ç­‰......

â‘¡ æ–‡ç« ä¼ é€’çš„ä»€ä¹ˆï¼Œå¦‚ï¼šè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿæå‡ºä»€ä¹ˆè§‚ç‚¹ï¼Ÿä»‹ç»ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Ÿè®©ä½ è§‰å¾—å€¼å¾—ç»†çœ‹çš„ç‚¹åœ¨äºï¼Ÿç­‰ç­‰......

â‘¢ åˆ«äººæ¨èçš„ï¼Œä½†æ˜¯ç°åœ¨æ²¡ç©ºç»†çœ‹ï¼Œå…ˆæ”¶å½•ä¸€ä¸‹

### 2.2 è¡¨æ ¼è®¾è®¡

| å­—æ®µå     | é£ä¹¦å­—æ®µç±»å‹ | å­—æ®µè¯´æ˜                                                                 |
|------------|---------------|--------------------------------------------------------------------------|
| é“¾æ¥       | æ–‡æœ¬        | åˆ†äº«çš„é“¾æ¥ï¼Œç‚¹å‡»å³å¯è·³è½¬é˜…è¯»                                               |
| æ ‡é¢˜       | æ–‡æœ¬        | æ ‡é¢˜                                                                     |
| æ‘˜è¦       | æ–‡æœ¬        | é€šç¯‡å¤§æ¦‚è®²äº†ä»€ä¹ˆï¼Œå¯ä»¥ç”±jina-readeræ’ä»¶è‡ªåŠ¨ç”Ÿæˆ                               |
| æ¥æº       | å•é€‰          | æ¥è‡ªå“ªä¸ªå¹³å°ï¼Œå¦‚ï¼šbç«™ã€å°çº¢ä¹¦ã€ç½‘ç«™ç­‰ç­‰ã€‚åç»­å¦‚æœæ‰©å±•åšæ•°æ®ç»Ÿè®¡æ—¶å¯ä½œä¸ºä¸€é¡¹åˆ†ç±»æŒ‡æ ‡   |
| å½¢å¼       | å•é€‰         | å›¾æ–‡ã€è§†é¢‘                                                                |
| tag        | å¤šé€‰         | æŒ‰é¢†åŸŸã€åŠŸèƒ½ç­‰æ‰“ä¸Štagï¼Œä¹Ÿå¯ä»¥ç§°å®ƒä¸ºæŸä¸ªåˆé›†                                |
| çŠ¶æ€       | å•é€‰         | å·²é˜…è¯»ã€æœªé˜…è¯»                                                             |
| æ”¶é›†æ—¥æœŸ   | æ–‡æœ¬        | å†™å…¥è¡¨æ ¼æ—¥æœŸï¼Œå› ä¸ºé£ä¹¦æ—¶é—´æ ¼å¼å’Œæ’ä»¶æ—¶é—´æ ¼å¼æœ‰å‡ºå…¥ï¼Œæˆ‘å¤ªæ‡’äº†ä¸æƒ³åšå¤„ç†ï¼Œç›´æ¥è®¾ç½®æ–‡æœ¬å‹ |
| æ”¶è—åŸå›    | æ–‡æœ¬        | ä¸ºä»€ä¹ˆè¦æ”¶å½•è¿™ç¯‡                                                          |
| è¯»åæ„Ÿ     | æ–‡æœ¬        | è¯»åæ„Ÿ                                                                   |
| ä»·å€¼ç­‰çº§   | å•é€‰         | è¿™ç¯‡æ–‡ç« å«é‡‘é‡æ€ä¹ˆæ ·ï¼Œå¯è‡ªå·±è®¾ç½®å€¼ï¼Œæ¯”å¦‚ï¼šä½ã€ä¸­ã€é«˜                          |

### 2.3 æ–°å»ºå¤šç»´è¡¨æ ¼æ³¨æ„äº‹é¡¹

è¡¨æ ¼é“¾æ¥åœ¨æµè§ˆå™¨ä¸­ä¸€å®š**ä¸èƒ½æ˜¯wiki**ï¼Œæ‰€ä»¥**ä¸ªäººç”¨æˆ·**ç›´æ¥ä»"å¤šç»´è¡¨æ ¼"æ–°å»ºã€‚**ä¼ä¸šç”¨æˆ·**åœ¨äº‘æ–‡æ¡£ã€å¤šç»´è¡¨æ ¼æ–°å»ºéƒ½å¯ä»¥ã€‚

![ä¸ªäººç”¨æˆ·æ–°å»ºä½ç½®](https://github.com/user-attachments/assets/e7f228f4-59b6-46b3-a0d4-1e18e157deb8)

![è¡¨æ ¼æ³¨æ„äº‹é¡¹](https://github.com/user-attachments/assets/13ece857-0405-4351-b93b-2f6ec631bf38)

æ–°å»ºåç©ºè¡¨å¦‚å›¾æ‰€ç¤ºï¼š

![ç©ºè¡¨ç¤ºä¾‹](https://github.com/user-attachments/assets/82183037-9b8e-45dc-b1b6-af8397aad289)

## 3. å¤šå¹³å°åˆ†äº«é“¾æ¥å¯¹æ¯”

é¦–å…ˆè®¾å®šæ”¶è—çš„æ–‡ç« å½¢å¼åˆ†ä¸ºï¼šå›¾æ–‡ï¼ˆçº¯æ–‡åŒ…å«å›¾æ–‡å†…ï¼‰ã€è§†é¢‘ã€‚

æ”¶è—æ—¶æƒ³è¦çˆ¬è™«æ¥å†™æ¦‚è¦ï¼Œé€‰æ‹©jina-readeræ’ä»¶æ¥æµ‹è¯•ä¸‹ä»¥ä¸Šåˆ†ç±»ï¼Œå‘ç°è§†é¢‘ç±»è¿›è¡Œçˆ¬å–å…¶å®æ˜¯ä¸å¤ªç¬¦åˆæƒ³è¦çš„ï¼Œæ‰€ä»¥è®¾å®š```è§†é¢‘ç±»åªå–æ ‡é¢˜ï¼Œå¯¹äºçº¯é“¾æ¥çš„å†æ ¹æ®reasonæ¥ç”Ÿæˆæ ‡é¢˜```ã€‚

**å¦å¤–æ³¨æ„ï¼ŒçŸ¥ä¹é“¾æ¥æ˜¯æ— æ³•ç”¨jina-readerçˆ¬å–çš„ï¼Œæœ¬æ•™ç¨‹ä¸å¤„ç†çŸ¥ä¹ç±»é“¾æ¥**

ä»”ç»†çœ‹å„ä¸ªå¹³å°çš„åˆ†äº«é“¾æ¥å½¢å¼ï¼Œæœ‰äº›å¹³å°åˆ†äº«é“¾æ¥éœ€è¦åšä¸€ä¸ªæå–```httpsé“¾æ¥```å¤„ç†ï¼š

```å°çº¢ä¹¦åˆ†äº«é“¾æ¥```ï¼š

```
93 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† lR3gT9A0eAQ5XWn ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```


```æŠ–éŸ³åˆ†äº«é“¾æ¥```ï¼š

```
9.99 Eus:/ 12/21 J@i.Ch å¤§è¿åƒä¸‡çº§åšä¸»æ€»ç»“çš„å¤§è¿æ—…æ¸¸æ³¨æ„äº‹é¡¹ï¼Œçœ‹è¿™ä¸€ä¸ªå°±è¶³å¤Ÿè¶³å¤Ÿäº† # å¤§è¿æ—…æ¸¸æ”»ç•¥ # å¤§è¿ # å¤§è¿ç¾é£Ÿ   https://v.douyin.com/iksNQqte/ å¤åˆ¶æ­¤é“¾æ¥ï¼Œæ‰“å¼€DouéŸ³æœç´¢ï¼Œç›´æ¥è§‚çœ‹è§†é¢‘ï¼
```

```å…¬ä¼—å·æ–‡ç« åˆ†äº«é“¾æ¥```ï¼š

```
https://mp.weixin.qq.com/s/d8mvSU77l_xAHKo3gqyPGQ
```

```Bç«™åˆ†äº«é“¾æ¥```ï¼š

```
ã€SOLIDWORKS æ•™å­¦ ç²¾å“æ•™ç¨‹ | 2024å¹´æ–°ä¿® | Bç«™ ç‚¹èµ æ’­æ”¾ æ”¶è— NO.1ã€‘ https://www.bilibili.com/video/BV1iw411Z7HZ/?share_source=copy_web&vd_source=93b749d0faa4f6da4b3a9891caf73e4d
```

```youtubeåˆ†äº«é“¾æ¥```ï¼š

```
https://youtu.be/siHNmXLZ8y4?si=2KwcS5wElJBK4Eva
```

## 4. è‡ªå®šä¹‰InternLMæ’ä»¶

é‚€è¯·ç è¯·ç§èŠå°åŠ©æ‰‹ ~

### 4.1 æ–°å»ºæ’ä»¶

![æ’ä»¶æ–°å»º1](https://github.com/user-attachments/assets/eedfcbd5-3fc8-453c-9cf1-3c1e5e3849d2)

![æ’ä»¶æ–°å»º2](https://github.com/user-attachments/assets/33241343-2282-4962-8337-6568d2c4128a)

![æ’ä»¶æ–°å»º3](https://github.com/user-attachments/assets/6fd0ece5-146b-4f37-a7dd-6a3f313395c3)

![æ’ä»¶æ–°å»º4](https://github.com/user-attachments/assets/52a8d245-82c3-4963-9b5d-b9da30c74452)

### 4.2 é…ç½®å…ƒæ•°æ®

ä»”ç»†é˜…è¯»[ä¹¦ç”Ÿæµ¦è¯­çš„APIæ–‡æ¡£](https://internlm.intern-ai.org.cn/api/document)ã€‚å…¶ä¸­æ¨¡å‹ã€è¯·æ±‚åœ°å€ã€api_keyå¯ä»¥è®¾å®šä¸ºå›ºå®šå€¼ã€‚æˆ‘ä»¬è®¾ç½®è¾“å…¥å‚æ•°ä¸ºpromptå’Œuser_requestã€‚è¾“å‡ºå‚æ•°ä¸ºanswerã€‚

![é…ç½®å…ƒæ•°æ®å›¾](https://github.com/user-attachments/assets/d1213ed9-7839-4733-bf8d-361f5759089b)

### 4.3 è·å–API_KEY

ç‚¹å‡»[ä¹¦ç”ŸÂ·æµ¦è¯­API TOKENS](https://internlm.intern-ai.org.cn/api/tokens)ï¼Œæ–°å»ºapi_tokenã€‚

![æ–°å»ºtoken](https://github.com/user-attachments/assets/2060ac1c-9029-4917-b371-2b7d421788fa)


### 4.4 ä»£ç è¯·æ±‚

ä¿®æ”¹ç¬¬14è¡Œä¸ºä½ è‡ªå·±çš„API_TOKENã€‚

```
import requests
from typing import TypedDict, Optional

# å…¥å‚
class Input(TypedDict):
    prompt: str
    user_request: str

# è¾“å‡º
class Output(TypedDict):
    answer: str

# å›ºå®šçš„APIé…ç½®
API_KEY = ""  # å›ºå®šAPIå¯†é’¥
API_URL = "https://internlm-chat.intern-ai.org.cn/puyu/api/v1/chat/completions"  # å›ºå®šè¯·æ±‚åœ°å€

def handler(args) -> Output:
    # è·å–è¾“å…¥å˜é‡
    prompt = args.input.prompt
    user_request = args.input.user_request

    # è°ƒç”¨merge_promptå‡½æ•°åˆå¹¶æç¤ºè¯å’Œç”¨æˆ·è¦æ±‚
    full_prompt = merge_prompt(prompt, user_request)

    # è°ƒç”¨ask_questionå‡½æ•°è·å–answer
    answer = ask_question(full_prompt)
    return {"answer": answer if answer else ""}

def merge_prompt(prompt: str, user_request: str) -> str:
    """æç¤ºè¯å’Œç”¨æˆ·éœ€æ±‚æ‹¼æ¥å¤„ç†å‡½æ•°"""
    # æ‹¼æ¥æç¤ºè¯å’Œç”¨æˆ·éœ€æ±‚
    full_prompt = f'{prompt}, ã€ç”¨æˆ·æä¾›çš„æè¿°ã€‘ - {user_request}'
    return full_prompt

def ask_question(question: str) -> Optional[str]:
    try:
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {API_KEY}"
        }

        data = {
            "model": "internlm2.5-latest",
            "messages": [{
                "role": "user",
                "content": question
            }],
            "n": 1,
            "temperature": 0.8,
            "top_p": 0.9
        }
        response = requests.post(API_URL, headers=headers, json=data)
        message = response.json()

        if 'error' not in message:
            return message['choices'][0]['message']['content']
        else:
            print("æ— æ³•è·å–æ¨¡å‹å›ç­”:", message.get('error', 'Unknown error'))
            return None

    except requests.exceptions.RequestException as e:
        print(f"è¯·æ±‚é”™è¯¯ï¼š{e}")
        return None
    except Exception as e:
        print(f"å‘ç”Ÿé”™è¯¯: {str(e)}")
        return None
```

### 4.4 æµ‹è¯•

æµ‹è¯•ä¹‹å‰å…ˆåœ¨å·¦ä¸‹ä¾§å®‰è£…requestsçš„åŒ…ã€‚

![å®‰è£…ä¾èµ–åŒ…](https://github.com/user-attachments/assets/4ef0ba1e-df4e-4148-b574-00e442dc62fd)

![è‡ªå®šä¹‰æ’ä»¶æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/8b0465a7-5f97-4ee1-a139-2fafeddf8412)

### 4.5 å‘å¸ƒ

æ— è®ºæ˜¯å·¥ä½œæµè¿˜æ˜¯æ’ä»¶ï¼Œæƒ³åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨éƒ½éœ€è¦å…ˆå‘å¸ƒæ‰è¡Œã€‚

![å‘å¸ƒæ’ä»¶](https://github.com/user-attachments/assets/5509e184-6e47-4e33-9c50-247bcf788602)

çœ‹åˆ°æœ‰ä¸ªç»¿è‰²çš„å‹¾ï¼Œå°±ä»£è¡¨å‘å¸ƒæˆåŠŸäº†ã€‚

![å‘å¸ƒæˆåŠŸ](https://github.com/user-attachments/assets/bb0d5172-5332-43f4-a158-84dbc3705d0b)

# ä¸‰ã€æ”¶è—è‡³é£ä¹¦è¡¨æ ¼å·¥ä½œæµ

## 1. å·¥ä½œæµæ•´ä½“æµç¨‹å›¾

**æ³¨æ„ï¼šå¤šåˆ†æ”¯ç›¸åŒåŠŸèƒ½å¤„ç†æ—¶ï¼ŒèŠ‚ç‚¹å‘½åè¦åŒºåˆ«å¥½ï¼Œè¿™æ ·åœ¨åˆå¹¶åˆ†æ”¯çš„æ—¶å€™é€‰æ‹©å‚æ•°æ›´ç›´è§‚ä¸€ç‚¹ã€‚æ¯”å¦‚å›¾æ–‡ç±»å’Œè§†é¢‘ç±»éƒ½éœ€è¦è¿›è¡Œåºåˆ—åŒ–å¤„ç†ï¼ŒèŠ‚ç‚¹åç§°å‘½åæ—¶å¯ä»¥é‡‡ç”¨ v_xx p_xx ç­‰ç­‰**

![æ•´ä½“å›¾](https://github.com/user-attachments/assets/3a333993-c9d2-442f-acdf-858c00fc4ff8)

## 2. æ–°å»ºcontent_arrangeå·¥ä½œæµ

![æ–°å»ºå·¥ä½œæµ](https://github.com/user-attachments/assets/bc965df6-3f21-4aea-a124-3522a449ee7f)

æ ¹æ®å¼¹çª—ï¼Œä¸€æ­¥æ­¥å¡«å†™å®Œæˆåå°±èƒ½çœ‹åˆ°å›¾ä¸‹é¡µé¢ã€‚è¿™é‡Œåˆ†å‡ ä¸ªåŠŸèƒ½åŒºåŸŸã€‚

![æ–°å»ºæˆåŠŸ](https://github.com/user-attachments/assets/1e83d89d-8f99-40a9-9271-c9e8073f437e)

**æ³¨æ„ï¼šæ•™ç¨‹ç¼–å†™çš„æ—¶å€™cozeå·¥ä½œæµé¡µé¢æœªæ”¹ç‰ˆï¼Œä»¥ä¸‹æˆªå›¾ä¸æœ€æ–°æœ‰ç»†å¾®å·®åˆ«ï¼Œä¸è¿‡å½±å“ä¸å¤§ï¼Œæœ€æ–°ç‰ˆçš„å°†ä¼šé€šè¿‡è§†é¢‘æ•™ç¨‹æ¥æ¼”ç¤ºå’Œé™è§£**

## 3. å®šä¹‰è¾“å…¥å˜é‡

æˆ‘ä»¬å…ˆæ¥çœ‹è¡¨æ ¼ï¼Œå¯¹å­—æ®µåšä¸€äº›å½’ç±»ï¼Œå…¶ä¸­é“¾æ¥ã€å½¢å¼ã€tagå’Œæ”¶è—åŸå› æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å¡«å†™çš„ã€‚

![è¡¨æ ¼å…ƒç´ ](https://github.com/user-attachments/assets/758c496b-8c15-4187-ba8a-79d74553fb9a)

åœ¨å¼€å§‹èŠ‚ç‚¹æ–°å¢ä¸Šè¿°4ä¸ªå˜é‡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæ ‡è¯†ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¦å¯¹åˆ†äº«é“¾æ¥è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®å®ƒçš„åç§°ä¸ºhandleï¼Œç±»å‹ä¸ºbooleanã€‚

![æ–°å¢å˜é‡](https://github.com/user-attachments/assets/9d77f4c2-0a97-478e-a422-0312f2b6c935)

## 4. æ·»åŠ æ—¥æœŸæ’ä»¶

æ— è®ºæ˜¯å“ªç§å½¢å¼çš„åˆ†äº«å†…å®¹ï¼Œéƒ½éœ€è¦è®°å½•æ”¶é›†æ—¥æœŸï¼Œæ‰€ä»¥å®ƒä½œä¸ºä¸€ä¸ªå…±ç”¨å˜é‡ï¼Œæ”¾åœ¨å¼€å§‹èŠ‚ç‚¹åé¢ã€‚

ç‚¹å‡»å·¦ä¾§```æ’ä»¶```èŠ‚ç‚¹ï¼Œåœ¨æ’ä»¶å¸‚åœºæœç´¢"æ—¶é—´"ï¼Œç‚¹å‡»æ·»åŠ ã€‚

![æ·»åŠ æ—¥æœŸæ’ä»¶](https://github.com/user-attachments/assets/07d29f4b-47c9-4f4d-8ab4-d5c597c5b799)

å°†å®ƒä¸å¼€å§‹èŠ‚ç‚¹è¿çº¿ã€‚

![è¿çº¿](https://github.com/user-attachments/assets/456fcd81-a4ad-41ce-9aee-2cbe2b3244e9)

## 5. ifé€‰æ‹©å™¨åˆ¤æ–­å†…å®¹å½¢å¼

æ ¹æ®æˆ‘ä»¬çš„è®¾å®šï¼Œå›¾æ–‡ç±»æ˜¯å¯ä»¥çˆ¬å–ï¼Œå¹¶åšå¤§æ¨¡å‹ç”Ÿæˆæ‘˜è¦çš„ï¼Œä½†æ˜¯è§†é¢‘ç±»æ˜¯ä¸åšçˆ¬å–çš„ã€‚æ‰€ä»¥åœ¨å¼€å§‹å¤„ç†æµç¨‹å‰ï¼Œå…ˆè¿›è¡Œä¸€æ¬¡```å½¢å¼```åˆ¤æ–­ã€‚

ç‚¹å‡»å·¦ä¾§â€œifé€‰æ‹©å™¨â€ï¼Œæ·»åŠ ï¼Œå¹¶äºæ—¥æœŸæ’ä»¶è¿çº¿ã€‚

![æ·»åŠ Ifé€‰æ‹©å™¨](https://github.com/user-attachments/assets/f3d30839-26cc-4e4a-a355-c6d4548ed144)

æˆ‘ä»¬å…ˆåšå›¾æ–‡ç±»å¤„ç†ã€‚å¦‚æœmodalityç­‰äºå›¾æ–‡ï¼Œèµ°ç¬¬ä¸€ä¸ªåˆ†æ”¯å¤„ç†ï¼Œå¦åˆ™ï¼ˆmodalityç­‰äºè§†é¢‘ï¼‰èµ°å‰©ä¸‹çš„åˆ†æ”¯å¤„ç†ã€‚

è¿™é‡Œå…¶å®ä¸å¤ªä¸¥è°¨çš„ï¼Œä¸»è¦æ˜¯å·ä¸ªæ‡’ï¼Œæˆ‘ä»¬è‡ªå·±è¾“å…¥çš„æ—¶å€™ä¸¥æ ¼ä¸€ç‚¹ï¼Œåªè¾“å…¥ï¼šå›¾æ–‡ or è§†é¢‘ã€‚ä¸¥è°¨ç‚¹åº”è¯¥æ˜¯if modality == "å›¾æ–‡" ... , else if modality == "è§†é¢‘" ... ,else ....

![ifé€‰æ‹©å™¨é…ç½®](https://github.com/user-attachments/assets/69989ab0-dfea-4e7e-bdc1-5d4ee77a7f70)

## 6. å›¾æ–‡ç±»

### 6.1 å›¾æ–‡ç±»-ä»£ç èŠ‚ç‚¹-æå–é“¾æ¥å¤„ç†

è¿™é‡Œæˆ‘å·ä¸ªæ‡’**ä¸ç”¨ifé€‰æ‹©å™¨**ï¼Œæ‰€æœ‰çš„é“¾æ¥è¾“å…¥è¿›æ¥åç»Ÿä¸€è¿›è¡Œ```æå–æœ‰æ•ˆurlåœ°å€```æ“ä½œã€‚

æ·»åŠ ä»£ç èŠ‚ç‚¹ï¼Œå¹¶ä¸ifé€‰æ‹©å™¨ç¬¬ä¸€ä¸ªåˆ†æ”¯è¿›è¡Œè¿çº¿ã€‚

![è¿çº¿](https://github.com/user-attachments/assets/8e6e0a6e-7673-48c1-9c76-9e0897779860)

#### 6.1.1 å¯¹è¾“å…¥è¾“å‡ºè¿›è¡Œè®¾ç½®

![è¾“å…¥è¾“å‡ºè®¾ç½®](https://github.com/user-attachments/assets/ba6ed391-9839-47e6-8469-e7ab662ed8f4)

#### 6.1.2 pythonä»£ç å¯¹é“¾æ¥è¿›è¡Œå¤„ç†

1. æŸ¥æ‰¾ URL èµ·å§‹ä½ç½®ï¼šä½¿ç”¨ find() æ–¹æ³•æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­ http:// æˆ– https:// çš„èµ·å§‹ä½ç½®ã€‚å¦‚æœæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªï¼Œå°±è®°å½•è¿™ä¸ªä½ç½®ä½œä¸º URL çš„èµ·å§‹ä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœ‰æ•ˆçš„ URL èµ·å§‹ä½ç½®ï¼Œè¿”å› "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆurl"ã€‚
2. æŸ¥æ‰¾ URL ç»“æŸä½ç½®ï¼šåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ end ä¸º URL çš„èµ·å§‹ä½ç½®ã€‚ä½¿ç”¨ while å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œé€ä¸ªæ£€æŸ¥å­—ç¬¦ï¼Œç»§ç»­å‘åç§»åŠ¨ end ä½ç½®ï¼Œç›´åˆ°é‡åˆ°ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·æˆ–å…¶ä»–æ ‡å¿—ç€ URL çš„ç»“æŸæ ‡ç‚¹ç¬¦å·ã€‚
3. æˆªå– URLï¼šä½¿ç”¨ç¡®å®šçš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œä»è¾“å…¥å­—ç¬¦ä¸²ä¸­æˆªå– URLã€‚å»æ‰å¯èƒ½å­˜åœ¨çš„å‰åç©ºç™½ã€‚
   
```
async def main(args):
    params = args['params']
    share_link = params['input']

    # æŸ¥æ‰¾ "http://" æˆ– "https://" çš„èµ·å§‹ä½ç½®
    start = share_link.find("http://")
    if start == -1:
        start = share_link.find("https://")
    
    if start != -1:
        # æŸ¥æ‰¾ URL æœ«å°¾çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·ç­‰ä½œä¸ºç»ˆæ­¢ä½ç½®
        end = start  # åˆå§‹åŒ–ç»“æŸä½ç½®ä¸ºèµ·å§‹ä½ç½®
        while end < len(share_link) and share_link[end] not in [" ", "\n", ",", "ã€‚", "ï¼Œ", "ï¼Ÿ"]:
            end += 1

        # æˆªå– URL
        url = share_link[start:end].strip()
    else:
        url = "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆé“¾æ¥"
    
    return {"url": url}
```

#### 6.1.3 æµ‹è¯•æå–urlèŠ‚ç‚¹

æµ‹è¯•ä»£ç èŠ‚ç‚¹æœ‰2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä»£ç ç¼–è¾‘å™¨æµ‹è¯•ï¼Œä¸€ç§æ˜¯å•ä¸ªèŠ‚ç‚¹æµ‹è¯•ã€‚

![èŠ‚ç‚¹æµ‹è¯•æ–¹å¼](https://github.com/user-attachments/assets/fd6e4622-f314-45a2-a7e1-fa187eb8141f)

è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå°çº¢ä¹¦å›¾æ–‡é“¾æ¥è¿›è¡Œæµ‹è¯•ã€‚**æ³¨æ„ï¼ŒåŒä¸€é“¾æ¥è¯·æ±‚æ¬¡æ•°å¤šäº†ã€é¢‘ç¹äº†ï¼Œåœ¨æ’ä»¶çˆ¬å–æ—¶ä¼šè¿”å›æ»‘å—éªŒè¯ï¼Œæ‰€ä»¥å¤§å®¶è‡ªå·±å‡†å¤‡ä¸€ä¸ªæµ‹è¯•é“¾æ¥**

```
46 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† S0TF6EsOSlaAJh4 ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xhsshare=pc_web&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

![æå–ä»£ç æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/5825ccc2-4189-48b0-bbcf-56eed0cf11e9)

### 6.2 å›¾æ–‡ç±»-æ’ä»¶å¸‚åœºjina-readeræ’ä»¶-çˆ¬å–å›¾æ–‡å†…å®¹

#### 6.2.1 æ·»åŠ jina-readeræ’ä»¶

æ’ä»¶å¸‚åœºæœç´¢"jina-reader"æ’ä»¶ï¼Œæ·»åŠ å¹¶ä½¿ç”¨ã€‚

![æ·»åŠ jinareaderæ’ä»¶](https://github.com/user-attachments/assets/455c4530-a128-4a0f-9cfa-636d0cdd590e)

![è¿çº¿](https://github.com/user-attachments/assets/dd8dac6c-8008-4142-8120-a02df2d1edc9)

#### 6.2.2 æµ‹è¯•èŠ‚ç‚¹

åˆšåˆšæˆ‘ä»¬ä¸Šä¸ªèŠ‚ç‚¹æå–çš„é“¾æ¥ï¼Œæ‹¿æ¥æµ‹è¯•ã€‚

```
https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xhsshare=pc_web&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š

![æµ‹è¯•ç»“æœ1](https://github.com/user-attachments/assets/0a5afd3a-24b2-47f9-8d28-18110a1f600e)

![æµ‹è¯•ç»“æœ2](https://github.com/user-attachments/assets/e24c1106-42be-46ad-b169-3d613c80cdc6)

### 6.3 å›¾æ–‡ç±»-ä»£ç èŠ‚ç‚¹-å¤„ç†çˆ¬å–å†…å®¹

å¤§æ¨¡å‹è®¾ç½®è¾“å…¥è¾“å‡ºé•¿åº¦æ˜¯æœ‰ä¸€å®šçš„é™åˆ¶çš„ï¼Œçˆ¬å–çš„å†…å®¹å¤ªé•¿ä½œä¸ºè¾“å…¥ä¼šå‡ºç°æŠ¥é”™ï¼Œæˆ‘ä»¬è¦å…ˆå¯¹å†…å®¹åšä¸€ä¸ªå¤„ç†ã€‚

ä»ä¸Šé¢çš„æˆªå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡º2ä¸ªä¿¡æ¯ï¼š

1. è¿”å›çš„contentæ˜¯markdownå½¢å¼
2. è¿”å›å‚æ•°3ä¸ªï¼šcontentã€titleã€url

æ¥ä¸‹æ¥æˆ‘ä»¬å¤„ç†å†…å®¹ä¸»è¦æœ‰ä»¥ä¸‹

1. å»é™¤markdownæ ¼å¼ï¼ˆåŒ…æ‹¬è¶…é“¾æ¥ã€å›¾ç‰‡ã€ç¬¦å·ç­‰ï¼‰
2. åˆå¹¶æ¢è¡Œç¬¦å¤„ç†ã€å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦ã€å»é™¤è¿ç»­çš„æ¨ªçº¿ä¸ç­‰å·
3. è¾“å‡ºåŸå§‹å­—ç¬¦æ•°å’Œå»é™¤åçš„å­—ç¬¦æ˜¯ï¼Œçœ‹ä¸‹å¯¹æ¯”
4. æˆªå–å‰3000å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥å°‘æ”¾ç‚¹ï¼‰
5. æ·»åŠ æå–çš„ URL å’Œtitle åˆ°æœ¬èŠ‚ç‚¹è¿”å›ç»“æœä¸­ã€‚ï¼ˆè¿™æ­¥æ˜¯å› ä¸ºä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦è°ƒç”¨è‡ªå®šä¹‰çš„æ’ä»¶ï¼Œåªèƒ½è¾“å…¥1ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æŠŠå®ƒä»¬åŒ…åœ¨ä¸€èµ·ã€‚ï¼‰

#### 6.3.1 é…ç½®è¾“å…¥è¾“å‡º

æˆ‘ä»¬è¾“å…¥çš„æ˜¯ä¸Šä¸ªèŠ‚ç‚¹è¿”å›çš„dataï¼Œè¾“å‡ºå˜é‡åoutputï¼Œå› ä¸ºè¦æ‹¿è¿™ä¸ªoutputå€¼ä¼ é€’ç»™è‡ªå®šä¹‰çš„æ¨¡å‹æ’ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®stringç±»å‹ï¼Œåˆ°æ—¶å€™åŒ…è£¹çš„å‚æ•°åšjsonå¤„ç†è¾“å‡ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![é…ç½®è¾“å…¥è¾“å‡º](https://github.com/user-attachments/assets/a61e8d99-f552-41ee-8c31-a6dafdc3e333)

#### 6.3.2 ä»£ç åŠæµ‹è¯•

```
import re
from typing import List, Tuple, Any
import json

async def main(args: Any) -> str:
    # ç›´æ¥ä½¿ç”¨ args["params"] è·å–å‚æ•°
    params = args["params"]
    
    # åˆå§‹åŒ–è¿”å›å€¼ä¸ºä¸€ä¸ªæ•°ç»„
    ret = []

    # 1. è·å–è¾“å…¥å‚æ•°ï¼Œå¹¶ç¡®ä¿æ˜¯å­—ç¬¦ä¸²
    raw_content = str(params["input"]["content"])
    title = str(params["input"]["title"])
    url = str(params["input"]["url"])

    # ç»Ÿè®¡åŸå§‹å­—ç¬¦æ•°é‡
    original_char_count = len(raw_content)

    # 2. ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç† Markdown è¶…é“¾æ¥å’Œå›¾ç‰‡éƒ¨åˆ†
    def markdown_to_text(md: str) -> Tuple[str, List[str]]:
        # æå– URL
        urls = re.findall(r'\[.*?\]\((.*?)\)', md)
        # å»æ‰é“¾æ¥éƒ¨åˆ†ï¼Œä¿ç•™é“¾æ¥æ–‡æœ¬
        md = re.sub(r'\[([^\]]+)\]\([^\)]+\)', r'\1', md)
        # å»æ‰å›¾ç‰‡é“¾æ¥
        md = re.sub(r'!\[.*?\]\(.*?\)', '', md)
        # å»æ‰ Markdown çš„æ ¼å¼å­—ç¬¦
        md = re.sub(r'[#*`-]', '', md)
        # å»æ‰å¤šä½™çš„æ¢è¡Œç¬¦
        md = re.sub(r'\n+', '\n', md)
        return md.strip(), urls

    # è½¬æ¢ Markdown åˆ°æ™®é€šæ–‡æœ¬
    plain_text, extracted_urls = markdown_to_text(raw_content)

    # 3. å»é™¤å¤šä½™çš„æ¨ªçº¿ã€ç­‰å·ï¼Œå¹¶å¤„ç†æ¢è¡Œç¬¦å’Œç©ºç™½å­—ç¬¦
    stripped_content = re.sub(r'-{2,}', '', plain_text)
    stripped_content = re.sub(r'={2,}', '', stripped_content)
    stripped_content = re.sub(r'\n+', '\n', stripped_content).strip()

    # 4. è®¡ç®—å»é™¤ Markdown åçš„å­—ç¬¦æ•°é‡
    clean_char_count = len(stripped_content)

    # 5. å¦‚æœå†…å®¹è¶…è¿‡ 3000 å­—ç¬¦ï¼Œåˆ™æˆªå–å‰ 3000 å­—ç¬¦
    stripped_content = stripped_content[:3000]

    # 6. æ·»åŠ å¤„ç†åçš„ç»“æœåˆ°è¿”å›å€¼åˆ—è¡¨
    ret.append({
        "original_char_count": original_char_count,
        "clean_char_count": clean_char_count,
        "plain_text": stripped_content,
        "url": url,
        "title": title
    })

    # 7. å°†è¿”å›å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¹¶ä½œä¸ºæœ€ç»ˆè¾“å‡º
    return json.dumps(ret, ensure_ascii=False)
```

æµ‹è¯•æ•°æ®ï¼Œä½ å¯ä»¥æ•´ä¸ªå·¥ä½œæµå¼€å§‹åˆ°ç»“æŸå…¨éƒ¨è¿çº¿æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥å•ä¸ªèŠ‚ç‚¹ç‚¹å‡»è‡ªåŠ¨ç”Ÿæˆæ•°æ®æ¥æµ‹è¯•æˆ–è€…æµ‹è¯•ä¸Šä¸ªèŠ‚ç‚¹ï¼Œå¤åˆ¶å¤‡ä»½å‡ºè¾“å‡ºç”¨æ¥ä¸‹ä¸ªèŠ‚ç‚¹æµ‹è¯•ã€‚

![è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®](https://github.com/user-attachments/assets/9c01f211-21ee-47d7-9775-97cb633618d7)

æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºå‡å°‘äº†500å¤šå­—ç¬¦ã€‚

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/5bb2e73e-bde4-4084-821a-4fa4c34ed640)

### 6.4 å›¾æ–‡ç±»-è‡ªå®šä¹‰æ’ä»¶-å¯¹å†…å®¹ã€æ ‡é¢˜ã€å¹³å°åšæç‚¼

#### 6.4.1 æ·»åŠ è‡ªå®šä¹‰æ’ä»¶å¹¶é…ç½®

æ·»åŠ æˆ‘ä»¬å‘å¸ƒçš„internlm_apiçš„æ’ä»¶ã€‚å›¢é˜Ÿç©ºé—´å°±æ˜¯å›¢é˜Ÿå·¥å…·ï¼Œä¸ªäººç©ºé—´å°±æ˜¯ä¸ªäººå·¥å…·ã€‚

![æ·»åŠ è‡ªå®šä¹‰æ’ä»¶](https://github.com/user-attachments/assets/30acac2a-caa5-4af8-8d33-032ea3994984)

é€‰æ‹©"è¾“å…¥"promptï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![è®¾ç½®å›¾](https://github.com/user-attachments/assets/976da6c1-8df5-4d66-971c-507ffb472792)

```
# ä»»åŠ¡\n
æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œç”Ÿæˆå¯¹åº”ä¿¡æ¯\n
# è¾“å‡ºæ ¼å¼è¦æ±‚\n
ç›´æ¥è¾“å‡ºåŸå§‹JSONæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•åŒ…è£…æˆ–ä»£ç å—ã€‚ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼Œä¸æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹ï¼š\n
{\n
\"summary\": \"åœ¨è¿™é‡Œå¡«å†™å†…å®¹æ‘˜è¦\",\n
\"siteName\": \"åœ¨è¿™é‡Œå¡«å†™å¹³å°åç§°\"\n
}\n
# è¾“å‡ºå†…å®¹è¦æ±‚\n
summaryï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„plain_textï¼Œæ•æ‰å†…å®¹ä¸»é¢˜ã€é˜…è¯»ä»·å€¼ï¼Œç”Ÿæˆä¸€æ®µç®€æ´è€Œå…¨é¢çš„æ‘˜è¦ã€‚ä¸è¦ä½¿ç”¨\"æ‘˜è¦ï¼š\"æˆ–ç±»ä¼¼å‰ç¼€ã€‚\n
\n
siteNameï¼šä»…å›ç­”URLå½’å±çš„å¹³å°åç§°ï¼Œä¸éœ€è¦é¢å¤–è§£é‡Šã€‚ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ã€‚å…·ä½“è¦æ±‚ï¼š\n
- ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰\n
- é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§°\n
- ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§°\n\n
# é‡è¦æé†’\n
- ä¸è¦ä½¿ç”¨jsonæˆ–ä»»ä½•å…¶ä»–ä»£ç å—æ ‡è®°\n
- ä¸è¦å°†è¾“å‡ºåŒ…è£…åœ¨\"answer\"æˆ–ä»»ä½•å…¶ä»–å­—æ®µä¸­\n
- ç¡®ä¿è¾“å‡ºçš„æ˜¯å¯ä»¥ç›´æ¥è¢«è§£æçš„åŸå§‹JSON\n
- é™¤äº†æŒ‡å®šçš„JSONç»“æ„å¤–ï¼Œä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–å†…å®¹
```

#### 6.4.2 æµ‹è¯•

æµ‹è¯•ç»“æœé‡Œæˆ‘ä»¬æƒ³è¦çš„summaryå’Œsitenameéƒ½è¢«åŒ…è£¹åœ¨ä¸€èµ·ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ–°å¢ä¸€ä¸ªä»£ç èŠ‚ç‚¹æŠŠå®ƒä»¬æå–å‡ºæ¥ã€‚

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/697a9d87-403f-4cbd-b81e-5cdef08b2c07)

### 6.5 å›¾æ–‡ç±»-ä»£ç èŠ‚ç‚¹-å¯¹æ¨¡å‹è¿”å›ç»“æœæå–å‚æ•°

#### 6.5.1 æ·»åŠ ä»£ç èŠ‚ç‚¹å¹¶é…ç½®

![ä»£ç èŠ‚ç‚¹é…ç½®å›¾](https://github.com/user-attachments/assets/3f95859c-f0e8-4354-a2d1-41466cbb7a22)

#### 6.5.2 ä»£ç 

æµ‹è¯•å¤§æ¨¡å‹èŠ‚ç‚¹å‡ è½®å‘ç°ï¼Œæœ‰æ—¶å€™å®ƒè¿”å›ç»“æœé‡Œæ˜¯æœ‰ä»£ç å—æ ‡è®°ï¼Œæ‰€ä»¥åœ¨ä»£ç é‡Œå¢åŠ å»é™¤ä»£ç å—æ ‡è®°å¤„ç†ã€‚

```
import json

async def main(args: Args) -> Output:
    # ä»è¾“å…¥ä¸­æå–æ–‡æœ¬
    text = args.params.get("input", "")
    
    # å»é™¤ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦
    text = text.replace('\\"', '"').replace('\\n', '\n')

    # å¦‚æœæœ‰ä»£ç å—æ ‡è®°ï¼Œå»é™¤å®ƒä»¬
    if "```json" in text:
        cleaned_text = text.replace("```json\n", "").replace("\n```", "").strip()
    else:
        cleaned_text = text.strip()

    # è§£æJSON
    try:
        data = json.loads(cleaned_text)
        summary = data.get("summary", "")
        site_name = data.get("siteName", "")
    except json.JSONDecodeError:
        summary = ""
        site_name = ""

    ret: Output = {
        "summary": summary,
        "sitename": site_name
    }
    return ret
```

#### 6.5.3 æµ‹è¯•

![ä»£ç èŠ‚ç‚¹æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/7eb994d1-a464-4df1-b166-167a8ef2d8f3)

### 6.6 é£ä¹¦å¤šç»´è¡¨æ ¼add_recordæ’ä»¶-ä¿¡æ¯å†™å…¥é£ä¹¦

#### 6.6.1 å‚æ•°å‡†å¤‡

è¿˜æ˜¯å…ˆæ¥çœ‹æˆ‘ä»¬çš„è¡¨æ ¼å…ƒç´ åˆ†ç±»å›¾ã€‚

![è¡¨æ ¼å…ƒç´ åˆ†ç±»å›¾](https://github.com/user-attachments/assets/ccd05afa-4ffc-47c3-af65-c9dd96780bcf)

æ‰€æœ‰éœ€è¦çš„å‚æ•°éƒ½å·²ç»å‡†å¤‡å¥½äº†ï¼Œä¸‹é¢å‡†å¤‡å†™å…¥é£ä¹¦è¡¨æ ¼ã€‚

- [x] é“¾æ¥ï¼šå¼€å§‹èŠ‚ç‚¹
- [x] å½¢å¼ï¼šå¼€å§‹èŠ‚ç‚¹
- [x] tagï¼šå¼€å§‹èŠ‚ç‚¹
- [x] æ”¶è—åŸå› ï¼šå¼€å§‹èŠ‚ç‚¹
- [x] æ ‡é¢˜ï¼šjina-readeræ’ä»¶æå–
- [x] æ‘˜è¦ï¼šå¤§æ¨¡å‹æç‚¼ç”Ÿæˆ
- [x] å¹³å°ï¼šå¤§æ¨¡å‹æå–ç”Ÿæˆ
- [x] æ”¶é›†æ—¥æœŸï¼šæ’ä»¶è·å–
- [x] çŠ¶æ€ï¼šå›ºå®šå‚æ•°

#### 6.6.2 æ–°å»ºé£ä¹¦å¤šç»´è¡¨æ ¼å†™å…¥æ’ä»¶

ä»æ’ä»¶å¸‚åœºæ·»åŠ å†™å…¥æ’ä»¶

![æ·»åŠ æ’ä»¶](https://github.com/user-attachments/assets/8147deae-b668-4cd7-aaec-e7c3a0a1aa1c)

å®ƒæœ‰2ä¸ªå¿…å¡«å‚æ•°ï¼šapp_tokenå’Œrecordsã€‚

```app_token :```å¤šç»´è¡¨æ ¼çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ”¯æŒè¾“å…¥æ–‡æ¡£urlã€‚

```records :```æ ¼å¼ä¸ºï¼š

```
[
    {
      "fields": "{\"æ–‡æœ¬\":\"æ–‡æœ¬å†…å®¹\",\"å•é€‰\":\"é€‰é¡¹ 1\",\"æ—¥æœŸ\":1674206443000}"
    }
]
```

![æ’ä»¶å›¾](https://github.com/user-attachments/assets/61793485-bc8c-450d-8a4a-94f86d84c6bf)

#### 6.6.3 ä»£ç èŠ‚ç‚¹-jsonåºåˆ—åŒ–å¤„ç†è¾“å…¥

ç°åœ¨æˆ‘ä»¬è¦å°†æ‰€æœ‰è¡¨æ ¼éœ€è¦çš„å‚æ•°å¤„ç†æˆrecordséœ€è¦çš„æ ¼å¼ã€‚

æ–°å»ºä»£ç èŠ‚ç‚¹ï¼Œä¸ä¸Šä¸ªèŠ‚ç‚¹è¿çº¿ï¼Œé…ç½®è¾“å…¥è¾“å‡ºå‚æ•°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®è¾“å…¥è¾“å‡º](https://github.com/user-attachments/assets/12ba6f00-1b62-4f71-946e-6ecfb27bf007)

```JavaScriptä»£ç ```

```
async function main({ params }: Args): Promise<Output> { 
    const fieldsMap = {
        "æ ‡é¢˜": params.title,
        "é“¾æ¥": params.url,
        "æ‘˜è¦": params.summary,
        "æ¥æº": params.sitename,
        "å½¢å¼": params.modality,
        "tag": params.tag.split(/[ï¼Œã€,]/),
        "çŠ¶æ€": "æœªé˜…è¯»",
        "æ”¶é›†æ—¥æœŸ": params.date,
        "æ”¶è—åŸå› ": params.reason,
    };

    const fields = Object.entries(fieldsMap).reduce((acc, [key, value]) => {
        acc[key] = value;
        return acc;
    }, {});

    const ret = {
        output: [
            { fields }
        ]
    };

    return ret;
}
```

æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š

![æµ‹è¯•ç»“æœå›¾](https://github.com/user-attachments/assets/0d2a545e-12ff-4130-bb94-0492febab552)

#### 6.6.4 è¿æ¥é£ä¹¦æ–°å¢è®°å½•èŠ‚ç‚¹

å¤åˆ¶é“¾æ¥åˆ°æµè§ˆå™¨æ‰“å¼€ã€‚

![å¤åˆ¶é“¾æ¥](https://github.com/user-attachments/assets/d15fd91b-a501-44ad-b236-26306e0e14fb)

å‚æ•°å¦‚å›¾æ‰€ç¤ºã€‚

![è¡¨æ ¼é“¾æ¥å‚æ•°](https://github.com/user-attachments/assets/13ff9c63-c1c8-4156-93ac-dbe835df4d14)

é…ç½®add_recordsèŠ‚ç‚¹ï¼Œå¹¶è¿æ¥ç»“æŸèŠ‚ç‚¹ï¼Œé€‰æ‹©add_recordsèŠ‚ç‚¹è¿”å›msgä½œä¸ºè¾“å‡ºã€‚

![è¿çº¿](https://github.com/user-attachments/assets/0661ead5-ce4f-4c67-8632-cba681294205)

![ç»“æŸèŠ‚ç‚¹è®¾ç½®](https://github.com/user-attachments/assets/59e729c4-ae9e-45f2-b3a3-fb7a201749a7)

### 6.7 å›¾æ–‡ç±»-æ•´ä½“æµ‹è¯•

ç»è¿‡å‰é¢çš„æ­å»ºï¼Œæˆ‘ä»¬å¯¹å›¾æ–‡ç±»çš„å¤„ç†åŸºæœ¬å®Œæˆã€‚æ•´ä½“å›¾å¦‚å›¾æ‰€ç¤ºï¼š

![å›¾æ–‡ç±»æ•´ä½“å›¾](https://github.com/user-attachments/assets/7e6018e1-618e-4e34-aed0-ac4f77423c85)

å‡†å¤‡ä¸€ä¸ªé“¾æ¥ï¼Œç‚¹å‡»å³ä¸Šè§’çš„è¯•è¿è¡Œæ¥æµ‹è¯•ä¸‹ï¼ï¼ï¼

![å¼€å§‹èŠ‚ç‚¹è¾“å…¥](https://github.com/user-attachments/assets/af71abe8-71a2-4a34-a70b-0367fbc0744c)

ç¬¬ä¸€æ¬¡çš„æ—¶å€™ä¼šè¦æ±‚é£ä¹¦å¯¹cozeæˆæƒï¼Œå¤åˆ¶ä¿¡æ¯åˆ°æµè§ˆå™¨è¿›è¡Œæˆæƒæˆ–è€…ç‚¹å‡»æˆæƒæŒ‰é’®ã€‚

![ç¬¬ä¸€æ¬¡è¿è¡Œæˆæƒé—®é¢˜](https://github.com/user-attachments/assets/da9291af-b6a0-4a6a-9c27-720416504d24)

![æˆæƒ](https://github.com/user-attachments/assets/ac2e7879-59a0-44c4-aee8-58c0809c5fc1)

é‡æ–°è¯•è¿è¡Œä¸€æ¬¡ã€‚

![å·¥ä½œæµè¿è¡Œç»“æœ](https://github.com/user-attachments/assets/b992db0e-2fa1-4e23-ba5b-e2a7d0500ba0)

æ‰“å¼€é£ä¹¦è¡¨æ ¼ï¼Œå¯ä»¥çœ‹åˆ°è®°å½•å·²ç»è¿›æ¥äº†ã€‚

![é£ä¹¦è¡¨æ ¼è®°å½•](https://github.com/user-attachments/assets/611e095f-eeae-42e4-b311-eda7c463b5fd)

ä¸ºäº†æ›´ç›´è§‚æŸ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ç”»å†Œè§†å›¾ã€‚

![æ·»åŠ ç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/cbf051a9-ee7b-45d6-906a-8ef7860376ec)

![ç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/7c3addd9-906b-442f-b49d-c1436a4a12c4)

å›¾æ–‡ç±»å®Œæˆåï¼Œæˆ‘ä»¬è¦å¯¹ifé€‰æ‹©å™¨åˆ†æ”¯çš„elseï¼ˆå³å¯¹è§†é¢‘ç±»è¿›è¡Œå¤„ç†ï¼‰

## 7. è§†é¢‘ç±»

é¦–å…ˆæŒ‰å¼€å§‹çš„è®¾æƒ³ï¼ˆä¸åšçˆ¬è™«ï¼Œä¸å†™æ‘˜è¦ï¼‰ï¼Œæˆ‘ä»¬è®¾è®¡2ç§æƒ…å†µï¼š

1. é’ˆå¯¹åˆ†äº«é“¾æ¥å†…åŒ…å«äº†æ ‡é¢˜ä¿¡æ¯ï¼šè¿™ç±»ï¼Œæˆ‘ä»¬å°±ç”¨ä»£ç æå–å‡ºurl,å¹¶ç”¨å¤§æ¨¡å‹èŠ‚ç‚¹æ¥å¯¹åˆ†äº«é“¾æ¥çš„æ–‡å­—éƒ¨åˆ†ç”Ÿæˆtitleã€‚

2. é’ˆå¯¹åªæœ‰urlçš„ï¼šè¿™ç±»ï¼Œæˆ‘ä»¬å°±æ ¹æ®reasoné€šè¿‡å¤§æ¨¡å‹æ¥ç”Ÿæˆä¸€ä¸ªç®€è¦çš„titleã€‚

### 7.1 ifé€‰æ‹©å™¨-æ˜¯å¦è¦å¯¹é“¾æ¥å¤„ç†

æ·»åŠ ifé€‰æ‹©å™¨ï¼Œå¹¶è¿çº¿ä¸Šä¸€ä¸ªifé€‰æ‹©å™¨çš„å¦åˆ™åˆ†æ”¯ã€‚

![æ·»åŠ ifé€‰æ‹©å™¨](https://github.com/user-attachments/assets/cbc59f7d-f476-4f49-a6d3-e1eff42e7203)

### 7.2 éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºtrueï¼‰-ä»£ç èŠ‚ç‚¹-æå–url

#### 7.2.1 ä»£ç èŠ‚ç‚¹é…ç½®

æ–°å¢ä»£ç èŠ‚ç‚¹ï¼Œè¿›è¡Œæå–ã€‚

![é…ç½®å›¾](https://github.com/user-attachments/assets/bc50c918-1639-4444-a7e1-2cee09cdb3af)

#### 7.2.2 ä»£ç 

è¿™é‡Œé’ˆå¯¹æŠ–éŸ³é“¾æ¥åšäº†é¢å¤–å¤„ç†ã€‚

```
async def main(args):
    params = args['params']
    share_link = params['input']

    # æŸ¥æ‰¾ "http://" æˆ– "https://" çš„èµ·å§‹ä½ç½®
    start = share_link.find("http://")
    if start == -1:
        start = share_link.find("https://")
    
    if start != -1:
        # æŸ¥æ‰¾ URL æœ«å°¾çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·ç­‰ä½œä¸ºç»ˆæ­¢ä½ç½®
        end = start  # åˆå§‹åŒ–ç»“æŸä½ç½®ä¸ºèµ·å§‹ä½ç½®
        while end < len(share_link) and share_link[end] not in [" ", "\n", ",", "ã€‚", "ï¼Œ", "ï¼Ÿ"]:
            end += 1

        # æˆªå– URL
        url = share_link[start:end].strip()
        
        # é’ˆå¯¹æŠ–éŸ³çŸ­é“¾æ¥ï¼Œç¡®ä¿ä»¥ "/" ç»“å°¾
        if "v.douyin.com" in url and not url.endswith("/"):
            last_slash = url.rfind("/")
            url = url[:last_slash + 1] if last_slash != -1 else url
    else:
        url = "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆé“¾æ¥"
    
    return {"url": url}
```

#### 7.2.3 æµ‹è¯•

![bç«™é“¾æ¥æµ‹è¯•](https://github.com/user-attachments/assets/7c6a0a6f-2c47-4f04-86d6-9eca5ec92aaa)

![æŠ–éŸ³é“¾æ¥æµ‹è¯•](https://github.com/user-attachments/assets/a6d1c602-fdbd-4164-957c-281b72b06a73)

### 7.3 éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºtrueï¼‰-è‡ªå®šä¹‰æ’ä»¶-å¯¹æ ‡é¢˜ã€å¹³å°åšæç‚¼

#### 7.3.1 æ’ä»¶è®¾ç½®

![æ’ä»¶è®¾ç½®](https://github.com/user-attachments/assets/1f700a67-eafa-4cdb-bd5a-48f49b000ca8)

#### 7.3.2 prompt

```
# ä»»åŠ¡ \n
æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œ æå–å‡ºæœ€èƒ½æ¦‚æ‹¬å†…å®¹ä¸»é¢˜çš„å¥å­æˆ–çŸ­è¯­å’Œurlå½’å±å¹³å°ã€‚ \n
# è¾“å‡ºæ ¼å¼è¦æ±‚ \n
ç›´æ¥è¾“å‡ºåŸå§‹JSONæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•åŒ…è£…æˆ–ä»£ç å—ã€‚ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼Œä¸æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹ï¼š \n
{ "title": "åœ¨è¿™é‡Œå¡«å†™æ ‡é¢˜", "siteName": "åœ¨è¿™é‡Œå¡«å†™å¹³å°åç§°" } \n
# è¾“å‡ºå†…å®¹è¦æ±‚ \n
titleï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ–‡å­—éƒ¨åˆ†ï¼Œæ•æ‰å†…å®¹çš„æ ¸å¿ƒä¸»é¢˜ï¼Œåº”è¯¥ç®€æ´æ˜äº†ï¼Œèƒ½å¤Ÿæ¦‚æ‹¬æ•´ä½“å†…å®¹ã€‚ä¸è¦ä½¿ç”¨"æ ‡é¢˜ï¼š"ç­‰å‰ç¼€ \n
siteNameï¼šä»…å›ç­”URLå½’å±çš„å¹³å°åç§°ï¼Œä¸éœ€è¦é¢å¤–è§£é‡Š,ä¸è¦ä½¿ç”¨"å¹³å°:"ç­‰å‰ç¼€ã€‚ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ã€‚å…·ä½“è¦æ±‚ï¼š \n
- ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰ \n
- é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§° \n
- ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§° \n
# é‡è¦æé†’ \n
- ç›´æ¥è¾“å‡ºå†…å®¹ï¼Œä¸è¦åŠ ```jsonæˆ–ä»»ä½•å…¶ä»–ä»£ç å—æ ‡è®° \n
- ä¸è¦å°†è¾“å‡ºåŒ…è£…åœ¨ä»»ä½•å…¶ä»–å­—æ®µä¸­ \n
- ç¡®ä¿è¾“å‡ºçš„æ˜¯å¯ä»¥ç›´æ¥è¢«è§£æçš„åŸå§‹JSON \n
- é™¤äº†æŒ‡å®šçš„JSONç»“æ„å¤–ï¼Œä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–å†…å®¹
```

#### 7.3.3 æµ‹è¯•

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/bedc206e-a328-4060-9618-ec748a578486)

### 7.4 éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºtrueï¼‰-ä»£ç èŠ‚ç‚¹-å¯¹å¤§æ¨¡å‹è¿”å›ç»“æœåšå‚æ•°æå–

#### 7.4.1 èŠ‚ç‚¹è®¾ç½®

![èŠ‚ç‚¹è®¾ç½®](https://github.com/user-attachments/assets/701fa4fc-814e-4d68-8991-667bec0d9709)

#### 7.4.2 ä»£ç 

```
import json
async def main(args: Args) -> Output:
    text = args.params.get("input", "")

    # å¦‚æœæœ‰ä»£ç å—æ ‡è®°ï¼Œå»é™¤å®ƒä»¬
    if "```json" in text:
        cleaned_text = text.replace("```json\n", "").replace("\n```", "").strip()
    else:
        cleaned_text = text.strip()


    # å°è¯•è§£æJSON
    try:
        data = json.loads(cleaned_text)
        title = data.get("title", "")
        site_name = data.get("siteName", "")
    except json.JSONDecodeError:
        title = ""
        site_name = ""

    ret: Output = {
        "title": title,
        "sitename": site_name
    }
    return ret
```

#### 7.4.3 æµ‹è¯•

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/33e27e2c-8fbc-46ae-9562-81e38dbf0365)

æˆªæ­¢è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯¹**éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºtrueï¼‰** çš„å¤„ç†å·²ç»å®Œæˆï¼Œä¸‹é¢å¯¹handleä¸ºfalseçš„æƒ…å†µæ¥å¤„ç†ã€‚

### 7.5 ä¸éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºfalseï¼‰-æ–‡æœ¬å¤„ç†èŠ‚ç‚¹-å‚æ•°æ‹¼æ¥

è¿™ç±»ï¼Œæˆ‘ä»¬è¦æ ¹æ®reasoné€šè¿‡å¤§æ¨¡å‹æ¥ç”Ÿæˆä¸€ä¸ªç®€è¦çš„titleï¼Œä¸æ­¤åŒæ—¶åˆ¤æ–­å¹³å°ä¸€å¹¶è®©å¤§æ¨¡å‹å¤„ç†ã€‚å¤§æ¨¡å‹åªèƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¯¹reasonå’Œurlè¿›è¡Œä¸€ä¸ªå‚æ•°æ‹¼æ¥åå†ä¼ å…¥ã€‚

æ·»åŠ æ–‡æœ¬å¤„ç†èŠ‚ç‚¹ï¼Œå¹¶é…ç½®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®](https://github.com/user-attachments/assets/19613dc1-fa77-4812-993a-2a402c5eccef)

æµ‹è¯•ç»“æœï¼š

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/6fc0f80c-7def-46c5-89f5-dd3fd6a40e50)

### 7.6 ä¸éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºfalseï¼‰-è‡ªå®šä¹‰æ’ä»¶-å¯¹æ ‡é¢˜ã€å¹³å°åšæç‚¼

#### 7.6.1 æ’ä»¶è®¾ç½®

![é…ç½®å›¾](https://github.com/user-attachments/assets/408637a4-2ae4-4f9f-abe8-5a7df18f7a04)

#### 7.6.2 prompt

```
# ä»»åŠ¡ \n
æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œ æå–å‡ºæœ€èƒ½æ¦‚æ‹¬å†…å®¹ä¸»é¢˜çš„å¥å­æˆ–çŸ­è¯­å’Œurlå½’å±å¹³å°ã€‚ \n
# è¾“å‡ºæ ¼å¼è¦æ±‚ \n
ç›´æ¥è¾“å‡ºåŸå§‹JSONæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•åŒ…è£…æˆ–ä»£ç å—ã€‚ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼Œä¸æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹ï¼š \n
{ "title": "åœ¨è¿™é‡Œå¡«å†™æ ‡é¢˜", "siteName": "åœ¨è¿™é‡Œå¡«å†™å¹³å°åç§°" } \n
# è¾“å‡ºå†…å®¹è¦æ±‚ \n
titleï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„reasonï¼Œæ•æ‰å†…å®¹çš„æ ¸å¿ƒä¸»é¢˜ï¼Œåº”è¯¥ç®€æ´æ˜äº†ï¼Œèƒ½å¤Ÿæ¦‚æ‹¬æ•´ä½“å†…å®¹ã€‚ä¸è¦ä½¿ç”¨"æ ‡é¢˜ï¼š"ç­‰å‰ç¼€ \n
siteNameï¼šä»…å›ç­”ç”¨æˆ·è¾“å…¥çš„urlå½’å±çš„å¹³å°åç§°ï¼Œä¸éœ€è¦é¢å¤–è§£é‡Š,ä¸è¦ä½¿ç”¨"å¹³å°:"ç­‰å‰ç¼€ã€‚ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ã€‚å…·ä½“è¦æ±‚ï¼š \n
- ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰ \n
- é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§° \n
- ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§° \n
# é‡è¦æé†’ \n
- ç›´æ¥è¾“å‡ºå†…å®¹ï¼Œä¸è¦åŠ ```jsonæˆ–ä»»ä½•å…¶ä»–ä»£ç å—æ ‡è®° \n
- ä¸è¦å°†è¾“å‡ºåŒ…è£…åœ¨ä»»ä½•å…¶ä»–å­—æ®µä¸­ \n
- ç¡®ä¿è¾“å‡ºçš„æ˜¯å¯ä»¥ç›´æ¥è¢«è§£æçš„åŸå§‹JSON \n
- é™¤äº†æŒ‡å®šçš„JSONç»“æ„å¤–ï¼Œä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–å†…å®¹
```

#### 7.6.3 æµ‹è¯•

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/4a98c668-4acd-4c86-b2e8-0d505d4c0492)

### 7.7 éœ€è¦é“¾æ¥å¤„ç†åˆ†æ”¯ï¼ˆhandleä¸ºfalseï¼‰-ä»£ç èŠ‚ç‚¹-å¯¹å¤§æ¨¡å‹è¿”å›ç»“æœåšå‚æ•°æå–

ç›´æ¥å¤åˆ¶7.4çš„ä»£ç å¤„ç†èŠ‚ç‚¹ï¼Œå¹¶å¼•ç”¨æ¨¡å‹è¿”å›ç»“æœã€‚

æµ‹è¯•ç»“æœå¦‚ä¸‹:

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/095550fe-4d2e-4a30-937d-b7cf765dee70)

### 7.8 è§†é¢‘ç±»-ä¸¤ä¸ªåˆ†æ”¯åˆå¹¶å¤„ç†

#### 7.8.1 å‚æ•°æ•´ç†

æˆ‘ä»¬æ•´ç†ä¸‹ç›®å‰å·²æœ‰å“ªäº›ï¼š

- [x] é“¾æ¥ï¼šå¤„ç†èŠ‚ç‚¹orå¼€å§‹èŠ‚ç‚¹
- [x] å½¢å¼ï¼šå¼€å§‹èŠ‚ç‚¹
- [x] tagï¼šå¼€å§‹èŠ‚ç‚¹
- [x] æ”¶è—åŸå› ï¼šå¼€å§‹èŠ‚ç‚¹
- [x] æ ‡é¢˜ï¼šæå–oræ¨¡å‹æ ¹æ®reasonç”Ÿæˆ
- [x] æ‘˜è¦ï¼šä¸éœ€è¦
- [x] å¹³å°ï¼šå¤§æ¨¡å‹æå–ç”Ÿæˆ
- [x] æ”¶é›†æ—¥æœŸï¼šæ’ä»¶è·å–
- [x] çŠ¶æ€ï¼šå›ºå®šå‚æ•°

#### 7.8.2 è§†é¢‘ç±»-ä»£ç èŠ‚ç‚¹-åˆå¹¶è¾“å‡ºå¤„ç†

ç”±äºæˆ‘ä»¬æ˜¯2ä¸ªåˆ†æ”¯åˆå¹¶åˆ¤æ–­åšä¸€ä¸ªè¾“å‡ºï¼Œçœ‹ä¸‹å›¾åˆ†æ”¯å¤„ç†ä¸Šï¼Œæ¶‰åŠåˆ°çš„å‚æ•°æœ‰ï¼šurlã€titleã€sitenameã€‚æ‰€ä»¥æˆ‘ä»¬è¦å¯¹å®ƒä»¬3ä¸ªè¿›è¡Œåˆ¤æ–­å¹¶è¾“å‡ºã€‚

![åˆ†æ”¯å›¾](https://github.com/user-attachments/assets/4037fcea-f2ed-4e94-af0d-e136dcbab3e4)

æ·»åŠ ä»£ç èŠ‚ç‚¹ï¼Œå¹¶é…ç½®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®å›¾](https://github.com/user-attachments/assets/0a402ccc-ace5-4d3e-b712-c2698641cad5)

ä»£ç ï¼š

```
async function main({ params }: Args): Promise<Output> {

    let ret;

    if(params.handle){
        ret = {
            "title": params.t_title || '',
            "sitename": params.t_sitename || '' ,
            "url": params.t_url || ''
        };
    } else {
        ret = {
            "title": params.f_title || '',
            "sitename": params.f_sitename || '',
            "url": params.f_url || ''
        };
    }
    return ret;
}
```

#### 7.8.3 æµ‹è¯•ç»“æœ

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/4608a1cc-7622-4231-88af-98123b11bb3a)

### 7.9 è§†é¢‘ç±»-ä»£ç èŠ‚ç‚¹-jsonåºåˆ—åŒ–å¤„ç†è¾“å…¥

ç°åœ¨æˆ‘ä»¬è¦å°†æ‰€æœ‰è¡¨æ ¼éœ€è¦çš„å‚æ•°å¤„ç†æˆrecordséœ€è¦çš„æ ¼å¼ã€‚å› ä¸ºå’Œå›¾æ–‡ç±»çš„å‚æ•°ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å†åšä¸€æ¬¡jsonåºåˆ—åŒ–å¤„ç†ã€‚

å¤åˆ¶å›¾æ–‡ç±»çš„jsonå¤„ç†èŠ‚ç‚¹ï¼Œä¸ä¸Šä¸ªèŠ‚ç‚¹è¿çº¿ï¼Œé…ç½®è¾“å…¥è¾“å‡ºå‚æ•°ï¼Œè¿™é‡Œæ³¨æ„çš„æ˜¯ï¼Œè¦åˆ é™¤summaryå…¥å‚ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®](https://github.com/user-attachments/assets/c58186ee-9eab-4a7e-9d55-bcefd7c7bcbb)

```JavaScriptä»£ç ```

```
async function main({ params }: Args): Promise<Output> { 
    const fieldsMap = {
        "æ ‡é¢˜": params.title,
        "é“¾æ¥": params.url,
        "æ‘˜è¦": "",
        "æ¥æº": params.sitename,
        "å½¢å¼": params.modality,
        "tag": params.tag.split(/[ï¼Œã€,]/),
        "çŠ¶æ€": "æœªé˜…è¯»",
        "æ”¶é›†æ—¥æœŸ": params.date,
        "æ”¶è—åŸå› ": params.reason,
    };

    const fields = Object.entries(fieldsMap).reduce((acc, [key, value]) => {
        acc[key] = value;
        return acc;
    }, {});

    const ret = {
        output: [
            { fields }
        ]
    };

    return ret;
}

```

### 7.10 è§†é¢‘ç±»&å›¾æ–‡ç±»åˆå¹¶è¾“å‡º

è¿™é‡Œæœ‰2ç§æ–¹å¼ï¼š

1. å•ç‹¬æ·»åŠ å†™å…¥æ’ä»¶ï¼Œåœ¨ç»“æŸèŠ‚ç‚¹æ–°å¢å‚æ•°æ¥æŸ¥çœ‹å†™å…¥æƒ…å†µã€‚

2. åˆ¤æ–­æ˜¯å›¾æ–‡è¿˜æ˜¯è§†é¢‘ï¼Œå†è¿æ¥å›¾æ–‡ç±»å·²ç»å†™å¥½çš„é£ä¹¦è¡¨æ ¼æ’ä»¶ã€‚

è¿™é‡Œé€‰æ‹©ç¬¬2ç§æ–¹å¼ã€‚

æ–°å¢ä»£ç èŠ‚ç‚¹ï¼Œå¯¹è¾“å…¥è¾“å‡ºè¿›è¡Œé…ç½®ï¼ˆï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®å›¾](https://github.com/user-attachments/assets/0957125f-2ca2-4a23-940a-4eae60ec6ee3)

```ä»£ç ```

åˆ¤æ–­ç”¨æˆ·ä¼ å…¥çš„ç±»å‹æ˜¯å›¾æ–‡è¿˜æ˜¯è§†é¢‘æ¥é€‰æ‹©æˆ‘ä»¬æœ€ç»ˆè¾“å‡ºçš„æ˜¯å“ªä¸ªåˆ†æ”¯çš„æ•°æ®ã€‚

```
async function main({ params }: Args): Promise<Output> {
    let ret;

    if (params.modality === "å›¾æ–‡") {
        ret = params.pic_json;  
    } else if (params.modality === "è§†é¢‘") {
        ret = params.video_json;  
    } else {
        ret = null;  
    }

    return ret;
}
```

### 7.11 è¿çº¿

ä¸æ·»åŠ è®°å½•èŠ‚ç‚¹è¿›è¡Œè¿çº¿ã€‚

![ä»£ç èŠ‚ç‚¹ä¸æ·»åŠ è®°å½•è¿çº¿](https://github.com/user-attachments/assets/bc5c65a8-2799-442e-8d94-507b7c102337)

![æ·»åŠ è®°å½•ä¸ç»“æŸèŠ‚ç‚¹è¿çº¿](https://github.com/user-attachments/assets/ec292362-4138-4e93-a6a7-26d0455ea765)

### 7.12 æµ‹è¯•

æ•´ä½“å›¾å¦‚ä¸‹æ‰€ç¤º:

![æ•´ä½“å›¾](https://github.com/user-attachments/assets/67a0f5f6-e5d4-4fd8-9acf-0b8b2390e8f9)

æ•´ä¸ªæµç¨‹å¾ˆå¿«ï¼Œå¤§æ¦‚3-10s

![å·¥ä½œæµè¿è¡Œå®Œæˆ](https://github.com/user-attachments/assets/a09ff4fb-8bcc-4878-a008-1fda0b7e6a8a)

çœ‹ä¸‹é£ä¹¦è¡¨æ ¼ã€‚

![è¡¨æ ¼è§†å›¾](https://github.com/user-attachments/assets/d8e114c3-3228-4b76-b88f-40c47d48c40b)

![ç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/4b913631-3577-44a2-9352-cd0c11a19841)

**ä¸€å®šè¦è®°å¾—å‘å¸ƒèŠ‚ç‚¹**

# å››ã€ï¼ˆä¸“ä¸šç‰ˆï¼‰ç«å±±æ–¹èˆŸæ§åˆ¶å°æ·»åŠ å…¶ä»–æ¨¡å‹

ç°åœ¨ä¸“ä¸šç‰ˆåªæä¾›äº†3ä¸ªæ¨¡å‹ï¼Œä¸å¤ªæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬ç™»å½•[ç«å±±æ–¹èˆŸæ§åˆ¶å°](https://console.volcengine.com/ark/region:ark+cn-beijing/model?vendor=Bytedance&view=LIST_VIEW)

ç‚¹å‡»â€œåœ¨çº¿æ¨ç†â€ï¼Œç‚¹å‡»â€œåˆ›å»ºæ¨ç†æ¥å…¥ç‚¹â€ï¼Œè¿™é‡Œæˆ‘æ–°å¢äº†ä¸€ä¸ªdoubao-128kçš„æ¨¡å‹ã€‚

![åœ¨çº¿æ¨ç†](https://github.com/user-attachments/assets/27f56ee9-34ef-4aef-8d88-558b7347e27e)

![æ·»åŠ å¤„](https://github.com/user-attachments/assets/0dda43f5-6e56-4878-87fd-4d9eabc71fc6)

![æ·»åŠ æ¨¡å‹](https://github.com/user-attachments/assets/69f7a80d-ddf1-443d-9936-579da25345d9)

# äº”ã€ä½¿ç”¨botè¿›è¡Œå†…å®¹æ”¶è—

## 1. æ–°å¢bot

ç‚¹å‡»"é¡¹ç›®å¼€å‘"ï¼Œæ–°å¢ä¸€ä¸ªæ™ºèƒ½ä½“

![æ–°å¢æ™ºèƒ½ä½“](https://github.com/user-attachments/assets/b55eaf95-f81b-4a92-b19b-d3fb7f4c44f6)

## 2. æ™ºèƒ½ä½“å†…æ·»åŠ å·²å‘å¸ƒçš„å·¥ä½œæµ

![æ·»åŠ å·¥ä½œæµ](https://github.com/user-attachments/assets/c6945d52-5540-4e89-9886-66cfd3115b4a)

## 3. è®¾ç½®å¿«æ·æŒ‡ä»¤(100%è°ƒç”¨å·¥ä½œæµï¼‰

åŸå…ˆæˆ‘ç»™å®šçš„æç¤ºè¯å¦‚å›¾æ‰€ç¤ºï¼Œå³ä¾¿å¯¹Botçš„äººè®¾ä¸å›å¤é€»è¾‘åšäº†å±‚å±‚é™åˆ¶ï¼Œå®ƒè¿˜æ˜¯ä¸ä¼š100%æŒ‰ç…§è®¾å®šå’Œé™åˆ¶æ¥è°ƒç”¨å·¥ä½œæµã€‚

![åŸå…ˆäººè®¾](https://github.com/user-attachments/assets/b6ae0b21-81b7-4e73-93d5-b27c14250680)

æƒ³åšåˆ°100%è°ƒç”¨å·¥ä½œæµã€‚è¿™é‡Œæˆ‘ä»¬å°±è¦ç”¨åˆ°**å¿«æ·æŒ‡ä»¤åŠŸèƒ½**ã€‚å®˜æ–¹æè¿°æ˜¯

```
å¿«æ·æŒ‡ä»¤æ˜¯å¯¹è¯è¾“å…¥æ¡†ä¸Šæ–¹çš„æŒ‰é’®ï¼Œé…ç½®å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿå‘èµ·é¢„è®¾å¯¹è¯
```

### 3.1 æ·»åŠ å†…å®¹æ”¶è—å·¥ä½œæµå¿«æ·æŒ‡ä»¤

![æ·»åŠ å¿«æ·æŒ‡ä»¤ä½ç½®](https://github.com/user-attachments/assets/9c38f5c0-a2cf-4300-bcbe-11d75bbb3b70)

![ç©ºç™½å¿«æ·æŒ‡ä»¤](https://github.com/user-attachments/assets/047563e1-1e81-4627-82cc-eb8fc84c60bd)

### 3.2 æŒ‡ä»¤è¯¦ç»†è®¾ç½®

æˆ‘ä»¬æ·»åŠ å·¥ä½œæµåï¼Œä¸‹æ–¹ä¼šæå–åˆ°å¼€å§‹èŠ‚ç‚¹çš„è¾“å…¥å‚æ•°ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚

![å¿«æ·æŒ‡ä»¤è®¾ç½®1](https://github.com/user-attachments/assets/8876a5d3-1ff8-4d21-ba6d-24da62e594eb)

![å¿«æ·æŒ‡ä»¤è®¾ç½®2](https://github.com/user-attachments/assets/6aa01f64-e0ea-430f-95c0-0b7c0a4b56ad)

å³ä¾§æ˜¯å±•ç°ç»™ç”¨æˆ·çš„è¾“å…¥æ¡†ï¼Œè‹±æ–‡æè¿°æœ‰æ—¶å€™æ²¡æœ‰ä¸­æ–‡æ¥å¾—ç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å·¦ä¾§çš„ç»„ä»¶è®¾ç½®ã€‚å¦‚å›¾æ‰€ç¤ºï¼š

![ä¸­æ–‡è®¾ç½®](https://github.com/user-attachments/assets/d5d1a7d9-e63a-4590-a4e9-d4ddef2e710d)

**æŒ‡ä»¤å†…å®¹**å°±æ˜¯æˆ‘ä»¬è¦å‘é€ç»™å·¥ä½œæµçš„å†…å®¹ã€‚å¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„æŒ‰é’®æ’å…¥å˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥`{`å¿«é€Ÿé€‰æ‹©ã€‚è®¾ç½®å®Œæˆåç‚¹å‡»ç¡®è®¤ã€‚

![æŒ‡ä»¤è®¾ç½®](https://github.com/user-attachments/assets/1474deb9-de08-46cd-bb73-f6ebdd0d5127)

### 3.3 æµ‹è¯•

ç°åœ¨å¯ä»¥çœ‹åˆ°è¾“å…¥æ¡†ä¸Šæ–¹æœ‰äº†å¿«æ·æŒ‡ä»¤ï¼Œç‚¹å‡»è¿™ä¸ªå¿«æ·æŒ‡ä»¤ã€‚

![å¿«æ·æŒ‡ä»¤ä½ç½®](https://github.com/user-attachments/assets/7ee95295-60fd-4679-9298-d701dc92a7d6)

![å¿«æ·æŒ‡ä»¤å±•å¼€](https://github.com/user-attachments/assets/16a69730-188a-43d6-94e9-a00125b525db)

è¾“å…¥å‚æ•°å¹¶å‘é€ï¼Œç¬¬ä¸€æ¬¡ä¼šå‡ºç°è¦æˆæƒé£ä¹¦è¡¨æ ¼çš„æç¤ºï¼Œæˆæƒåé‡æ–°è¿è¡Œä¸€è¾¹å°±å¯ä»¥äº†ã€‚è¿™é‡Œæˆ‘åšäº†ä¸€ä¸ªå…³äºå›¾æ–‡ä¸€ä¸ªå…³äºè§†é¢‘çš„æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æ·»åŠ è¿›é£ä¹¦è¡¨æ ¼äº†ã€‚

![æˆæƒ](https://github.com/user-attachments/assets/44ab9112-6d4e-491b-9ac2-93b7bec5aab3)

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/eef70255-bddc-48be-8896-a70ba7f86a38)

![æµ‹è¯•ç»“æœç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/bf6b0f11-e712-402a-8a90-eee8b6b01bfb)

## 4. botè¿è¡ŒæœŸé—´æ•ˆæœä¸ç†æƒ³å¦‚ä½•æ’æŸ¥

å¦‚æœè¿è¡ŒæœŸé—´è¾“å‡ºç»“æœä¸å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å¼€"è°ƒè¯•"æŒ¨ä¸ªèŠ‚ç‚¹æ’æŸ¥ã€‚

![è°ƒè¯•](https://github.com/user-attachments/assets/bb9dddf9-0e2a-4a27-a497-7d7ad1b352ab)

# å…­ã€å‘å¸ƒåˆ°é£ä¹¦æœºå™¨äºº+å¾®ä¿¡è®¢é˜…å·/å…¬ä¼—å·

## 1. è®¾ç½®æ™ºèƒ½ä½“æç¤ºè¯

æˆ‘ä»¬åœ¨è®¾ç½®å¿«æ·æŒ‡ä»¤çš„æ—¶å€™ï¼Œè®¾ç½®äº†ä¸€ä¸ª"æŒ‡ä»¤åç§°"ï¼ŒæŒ‡ä»¤åç§°å°±æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨é£ä¹¦æœºå™¨äººã€å…¬ä¼—å·ç­‰å¤–éƒ¨å¹³å°è°ƒç”¨å¿«æ·æŒ‡ä»¤çš„ã€‚

![å¿«æ·æŒ‡ä»¤åç§°](https://github.com/user-attachments/assets/45cc88c0-6c2b-4ed4-909f-3863a6b3f29d)

ä¸ºäº†è®©ç”¨æˆ·æ›´æ–¹ä¾¿è¾“å…¥ï¼Œæˆ‘ä»¬ç»™å¤–å±‚botçš„æç¤ºè¯å†…åŠ ä¸Šæ¨¡æ¿ã€‚

```æ–°æç¤ºè¯ï¼š```

```
# è§’è‰²ä¸æ ¸å¿ƒèŒè´£
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹æ”¶è—ä¸æ¨èåŠ©æ‰‹ç®¡ç†æ‰§è¡Œè€…ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š
1. è°ƒç”¨å·¥ä½œæµ {{content_arrange}} å¤„ç†æ‰€æœ‰å†…å®¹æ”¶è—è¯·æ±‚
2. ä¸¥æ ¼éµå®ˆä»¥ä¸‹æ“ä½œè§„ç¨‹ï¼Œä¸è¿›è¡Œä»»ä½•å…¶ä»–æ“ä½œ

#æŠ€èƒ½

## è¾“å‡ºè®¾å®šæ¨¡æ¿

1. å½“ç”¨æˆ·è¾“å…¥"æ¨¡æ¿"ï¼Œå›å¤ä»¥ä¸‹æ¨¡æ¿ï¼š
```æœºå™¨äºº```
/content_arrange
-- url: 
-- genre: 
-- tag: 
-- reason: 
-- handle:
 
```å…¬ä¼—å·```
/content_arrange
--åˆ†äº«é“¾æ¥ 
--å½¢å¼ 
--tag 
--æ”¶è—åŸå›  
--é“¾æ¥æ˜¯å¦è¦å¤„ç† 

# æ“ä½œè§„ç¨‹
## 1. é”™è¯¯å¤„ç†
- å¦‚æœå·¥ä½œæµè°ƒç”¨å¤±è´¥ï¼Œè¿”å›ï¼š
æŠ±æ­‰ï¼Œå·¥ä½œæµè°ƒç”¨å¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚

## 2. æ— æ•ˆè¾“å…¥å¤„ç†
å¯¹äºä¸ç¬¦åˆå†…å®¹æ¨èæˆ–æ”¶è—æ ¼å¼çš„è¾“å…¥ï¼š
å›å¤ï¼š
æŠ±æ­‰ï¼Œè¯·æ£€æŸ¥è¾“å…¥å‚æ•°

# å…³é”®åŸåˆ™
1. ä½¿ç”¨ç”¨æˆ·åŸå§‹è¾“å…¥ä½œä¸ºè¾“å…¥
2. ç¦æ­¢è‡ªè¡Œç”Ÿæˆä»»ä½•å¤„ç†æ”¶è—è¯·æ±‚ï¼Œæ‰€æœ‰æ“ä½œå¿…é¡»é€šè¿‡å·¥ä½œæµå®Œæˆ
3. ä¸æ‰§è¡Œä»»ä½•ä¸æ”¶è—æ— å…³çš„ä»»åŠ¡

# çŠ¶æ€ç®¡ç†
- åˆå§‹çŠ¶æ€ï¼šç­‰å¾…ç”¨æˆ·è¾“å…¥
- æ¯æ¬¡å®Œæˆå·¥ä½œæµè°ƒç”¨æˆ–æä¾›é”™è¯¯åé¦ˆåï¼Œç«‹å³è¿”å›åˆå§‹çŠ¶æ€

```

## 2. æˆæƒå¹¶å‘å¸ƒ

ä¸æƒ³å…¬å¼€åœ¨cozeå•†åº—çš„è¯å°±å–æ¶ˆå‹¾é€‰ã€‚

æ ¹æ®é¡µé¢æç¤ºæˆæƒé£ä¹¦æœºå™¨äººå’Œè®¢é˜…å·ï¼ˆæˆ–è€…å…¬ä¼—å·ï¼‰ã€‚

ç‚¹å‡»å‘å¸ƒåéœ€è¦**ç­‰å¾…å®¡æ ¸å®Œæˆ**ã€‚

![å‘å¸ƒé¡µé¢](https://github.com/user-attachments/assets/e52619ad-83cc-44e7-8e17-5f213fbf232b)

## 3. é£ä¹¦æœºå™¨äººæµ‹è¯•

ç‚¹å‡»"å·¥ä½œå°"ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å‘å¸ƒçš„æœºå™¨äººã€‚

![é£ä¹¦æœºå™¨äººä½ç½®](https://github.com/user-attachments/assets/946dbac9-57d5-48cd-a4c9-c76069be5ec6)

![é£ä¹¦æœºå™¨äººæµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/bcbc74c6-67f8-4849-8a8f-ed0cdc2ddc2c)

![æµ‹è¯•ç»“æœç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/39fb6483-e69f-462e-8078-5ca1ee702ca4)

## 4. è®¢é˜…å·ï¼ˆå…¬ä¼—å·ï¼‰æµ‹è¯•

![è®¢é˜…å·æµ‹è¯•](https://github.com/user-attachments/assets/15a4d344-51c6-4ea2-9af0-aafcc3ef2f41)

![è®¢é˜…å·ç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/8b2f634c-8a46-41b7-ac0f-b8e3e93c159f)


# ä¸ƒã€ï¼ˆè¿›é˜¶æ•™ç¨‹ï¼‰è·å–github trending å¹¶æ¯å‘¨å®šæ—¶è‡ªåŠ¨æ·»åŠ è¿›é£ä¹¦è¡¨æ ¼

## 1. æ–°å»ºä¸€å¼ æ•°æ®è¡¨

æˆ‘ä»¬åªéœ€è¦å­˜å‚¨ï¼šæ—¥æœŸã€urlã€ç®€ä»‹ã€æ ‡é¢˜

| å­—æ®µå     | é£ä¹¦å­—æ®µç±»å‹ | å­—æ®µè¯´æ˜                                                                 |
|------------|---------------|--------------------------------------------------------------------------|
| æ—¥æœŸ       | æ–‡æœ¬        | æ—¥æœŸ                                              |
| æ ‡é¢˜       | æ–‡æœ¬        | æ ‡é¢˜                                              |
| ç®€ä»‹       | æ–‡æœ¬        | é€šç¯‡å¤§æ¦‚è®²äº†ä»€ä¹ˆï¼Œç”±å¤§æ¨¡å‹ç”Ÿæˆ                       |
| åœ°å€       | æ–‡æœ¬        | åœ°å€                                              |
| language   | å•é€‰        | languageæ ‡ç­¾                                              |

![ç©ºè¡¨ç¤ºä¾‹](https://github.com/user-attachments/assets/7d6f14ba-de4b-40f7-8cdb-ff9c3e81bfbd)

## 2. æ·»åŠ å˜é‡

å‰é¢ä¸€ä¸ªå·¥ä½œæµæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åœ¨æ’ä»¶å†…è¾“å…¥å˜é‡ã€‚ç¨å¾®æœ‰ç‚¹éº»çƒ¦çš„æƒ…å†µæ˜¯ï¼Œå½“ä½ ä¿®æ”¹å®Œè¡¨æ ¼é“¾æ¥åéœ€è¦å…ˆå‘å¸ƒå·¥ä½œæµå†å‘å¸ƒbotã€‚

![ç›´æ¥è¾“å…¥é“¾æ¥](https://github.com/user-attachments/assets/c722cea0-ba6f-4661-8e53-351aba87f407)

è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§æ›´ä¾¿æ·çš„æ–¹å¼ï¼šå˜é‡ï¼Œæ¥æ–¹ä¾¿åç»­å¦‚æœè¦å¯¹è¡¨æ ¼é“¾æ¥åšæ”¹åŠ¨ã€‚è¿™æ ·å°±åªéœ€è¦å¯¹Botè¿›è¡Œé‡æ–°å‘å¸ƒå°±å¯ä»¥äº†ã€‚

è¿›å…¥æˆ‘ä»¬çš„botï¼Œç‚¹å‡»æ·»åŠ å˜é‡ï¼Œè¾“å…¥å˜é‡åç§°ï¼Œè¾“å…¥é»˜è®¤å€¼ï¼ˆæˆ‘ä»¬çš„è¡¨æ ¼é“¾æ¥ï¼‰ä¿å­˜ã€‚

æ³¨æ„ï¼šè¿™é‡Œè¡¨æ ¼é“¾æ¥ä¸€å®šè¦å‡†ç¡®ï¼Œä¸è¦è®¾ç½®æˆå†…å®¹æ”¶è—è¡¨æ ¼çš„é‡Œé“¾æ¥ã€‚

![è¡¨æ ¼é“¾æ¥](https://github.com/user-attachments/assets/262c972e-eb3f-4b12-9571-b164d861329c)

![æ·»åŠ å˜é‡1](https://github.com/user-attachments/assets/e28c344e-374a-454f-95b1-997c90fe28ee)

![æ·»åŠ å˜é‡2](https://github.com/user-attachments/assets/b1d944a3-1325-4851-9841-bb05f6219c3b)

## 3. æ–°å»ºè·å–githubæ¯æ—¥çƒ­ç‚¹å·¥ä½œæµ

### 3.1 æ·»åŠ æ—¶é—´æ’ä»¶å’Œå˜é‡èŠ‚ç‚¹

æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå¹¶æ’æ”¾åˆ°å¼€å§‹èŠ‚ç‚¹åæ–¹ã€‚è·å–æ—¥æœŸæ’ä»¶å’Œä¸Šä¸€ä¸ªå·¥ä½œæµä¸€æ ·ã€‚ç‚¹å‡»"å˜é‡"èŠ‚ç‚¹ã€‚

![æ–°å¢å˜é‡èŠ‚ç‚¹](https://github.com/user-attachments/assets/834d3c2e-cfeb-4fc0-88b3-50c56e767da0)

é€‰æ‹©"ä»æ™ºèƒ½ä½“è·å–å˜é‡å€¼"ï¼Œkeyå€¼å’Œæˆ‘ä»¬åœ¨botä¸­è®¾ç½®çš„è¦ä¸€è‡´ã€‚

![å˜é‡èŠ‚ç‚¹è®¾ç½®](https://github.com/user-attachments/assets/14aa5a75-686b-46b5-b62d-69954cd890c5)

![è¿çº¿å›¾](https://github.com/user-attachments/assets/2ac9ee68-2552-49e1-88cc-88804a3cd801)

### 3.2 æ·»åŠ çƒ­æ¦œæ’ä»¶

#### 3.2.1 æ·»åŠ çƒ­æ¦œæ’ä»¶ç›´æ¥æ’ä»¶å¸‚åœºæ·»åŠ åˆ«äººç°æˆçš„

æ’ä»¶å¸‚åœºé‡Œæ·»åŠ çƒ­æ¦œæ’ä»¶ã€‚

![æ·»åŠ æ’ä»¶](https://github.com/user-attachments/assets/27d9e94e-ed9d-41fd-b8c1-a8633595342f)

ç‚¹å‡»"æµ‹è¯•è¯¥èŠ‚ç‚¹"ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿”å›å‚æ•°æœ‰å¦‚å·¦åŠè¾¹æ‰€ç¤ºã€‚

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/0ca1af77-5c5d-4063-8f20-858b57258b27)

#### 3.2.2 è‡ªå®šä¹‰æ’ä»¶

è‡ªå®šä¹‰æ’ä»¶æ”¾åˆ°å·¥ä½œæµä¸­æœ‰æ—¶å€™ä¼šç½‘ç»œè¶…æ—¶ï¼Œæ•™ç¨‹æ¼”ç¤ºä½¿ç”¨çš„æ’ä»¶å¸‚åœºç°æˆçš„ã€‚

æ–°å»ºæ’ä»¶ã€‚

![æ–°å»ºæ’ä»¶1](https://github.com/user-attachments/assets/85cebe89-f299-4147-b5ed-062a2a91fd9c)

æ’ä»¶ä»£ç å¦‚ä¸‹ï¼š

```
from runtime import Args
from typings.get_github_trending.get_github_trending import Input, Output
import requests
from bs4 import BeautifulSoup
from datetime import datetime
import json


def get_trending_repos():
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',
        'Connection': 'keep-alive'
    }
    params = {
        'spoken_language_code': ''
    }
    
    url = 'https://github.com/trending'
    response = requests.get(url, headers=headers, params=params)
    print(response)
    soup = BeautifulSoup(response.text, 'html.parser')
    
    repos_data = []
    repositories = soup.select('article.Box-row')
    
    for repo in repositories:
        try:

            # è·å–ä»“åº“å®Œæ•´åç§°ï¼ˆåŒ…å«ä½œè€…å’Œä»“åº“åï¼‰
            link_element = repo.select_one('h2.h3 a')
            if link_element:
                full_name = link_element.get_text(strip=True).replace('\n', '').replace(' ', '')
                repo_url = f"https://github.com{link_element['href']}"
            else:
                full_name = None  # æˆ–è€…å¤„ç†ç¼ºå°‘é“¾æ¥çš„æƒ…å†µ
                repo_url = None  # æ ¹æ®éœ€è¦è¿›è¡Œå¤„ç†

            # åˆ†ç¦»ä½œè€…å’Œä»“åº“å
            author, repo_name = full_name.split('/')
            
            # è·å–æè¿°
            description = repo.select_one('p')
            description = description.get_text(strip=True) if description else ''
            
            # è·å–language
            language_span = repo.select_one('span[itemprop="programmingLanguage"]')
            language = language_span.get_text(strip=True) if language_span else 'Unknown'            
            
            # è·å–ç»Ÿè®¡ä¿¡æ¯
            stats = repo.select('a.Link--muted')
            stars = stats[0].get_text(strip=True).replace(',', '') if len(stats) > 0 else '0'
            
            # è·å–ä»Šæ—¥staræ•°é‡
            today_stars_elem = repo.select_one('span.d-inline-block.float-sm-right')
            today_stars = ''
            if today_stars_elem:
                today_stars = today_stars_elem.get_text(strip=True).split()[0].replace(',', '')
            
            
            repo_info = {
               "description":description,
               "language":language,
               "name":repo_name,
               "stars":stars,
               "today_stars":today_stars,
               "url":repo_url
            }
            
            repos_data.append(repo_info)
            
        except Exception as e:
            print(f"å¤„ç†ä»“åº“æ—¶å‡ºé”™: {str(e)}")
            continue
    
    return repos_data

def handler(args: Args[Input])->Output:
    repos_data = get_trending_repos()
    return {"result": repos_data}
```

æ’ä»¶ä¾èµ–åŒ…é…ç½®ï¼š

![æ’ä»¶ä¾èµ–åŒ…é…ç½®](https://github.com/user-attachments/assets/54f29cea-f355-4b92-b971-a8c045784181)

æ’ä»¶å…ƒæ•°æ®é…ç½®ï¼š

![æ’ä»¶å…ƒæ•°æ®é…ç½®](https://github.com/user-attachments/assets/cb996e55-dc8e-456e-9675-5996dded9a4e)

æµ‹è¯•ç»“æœï¼š

![æ¦œå•](https://github.com/user-attachments/assets/24828701-99f8-42a3-b04f-10fc03fb7fbc)

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/f0abda12-1dfb-4e18-91a2-aa989bb89a50)

![å·¥ä½œæµå†…æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/41a8cf9b-ccae-4c87-9d36-e8e551946cec)

**æµ‹è¯•åè®°å¾—å‘å¸ƒ**

### 3.2 å·¥ä½œæµæ€è·¯

1. ç”±æ’ä»¶æ¥è·å–é£ä¹¦è¡¨æ ¼æ‰€éœ€å­—æ®µå€¼
2. ï¼ˆå¾ªç¯èŠ‚ç‚¹å†…ï¼‰çˆ¬è™«çˆ¬å–é¡µé¢ä¿¡æ¯ï¼Œå¹¶åšå¤„ç†
3. ï¼ˆå¾ªç¯èŠ‚ç‚¹å†…ï¼‰å¤§æ¨¡å‹å¯¹çˆ¬å–å†…å®¹è¿›è¡Œè‹±è¯‘ä¸­
4. ï¼ˆå¾ªç¯èŠ‚ç‚¹å†…ï¼‰åºåˆ—åŒ–å¤„ç†ï¼Œå†™å…¥é£ä¹¦è¡¨æ ¼

### 3.3 å¾ªç¯ç¿»è¯‘å¹¶è¾“å‡ºå†™å…¥é£ä¹¦è¡¨æ ¼

é™¤äº†ä½¿ç”¨å¾ªç¯èŠ‚ç‚¹å¤–ï¼Œè¿˜æœ‰ä¸€ç§åšæ³•å°±æ˜¯ç”¨å®˜æ–¹çš„å¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œé€‰æ‹©æ‰¹å¤„ç†ã€‚

æœ¬æ•™ç¨‹æ¼”ç¤ºçš„æ˜¯è‡ªå®šä¹‰çš„InternLMæ¨¡å‹è°ƒç”¨æ’ä»¶ï¼Œèƒ½å¦å’Œå®˜æ–¹ä¸€æ ·å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å®ç°æ‰¹å¤„ç†æˆ‘ä¸çŸ¥é“ï¼Œåæ­£æˆ‘ä¸ä¼šå†™è¿™å—ä»£ç 

#### 3.3.1 æ–°å»ºå¾ªç¯èŠ‚ç‚¹

ç‚¹å‡»æ–°å¢å¾ªç¯èŠ‚ç‚¹ã€‚

![æ–°å»ºå¾ªç¯èŠ‚ç‚¹](https://github.com/user-attachments/assets/2a05a327-7708-4fa5-9b5a-832c528d0810)

è¿›è¡Œä¸€äº›å˜é‡é…ç½®ã€‚

![é…ç½®é¡µé¢](https://github.com/user-attachments/assets/aafd4a19-7107-4aec-958c-32aafbf7c39a)

#### 3.3.2 å¾ªç¯ä½“å†…æ·»åŠ jina-readeræ’ä»¶æ¥çˆ¬å–å†…å®¹

ç‚¹å‡»å¾ªç¯ä½“èŠ‚ç‚¹ï¼Œè“è‰²æ¡†ä»£è¡¨å·²ç»é€‰ä¸­ï¼Œåœ¨é€‰ä¸­çš„æƒ…å†µä¸‹ï¼Œå†å»ç‚¹å‡»æ·»åŠ å…¶ä»–æ’ä»¶ã€‚

![å¾ªç¯ä½“æ·»åŠ æ’ä»¶](https://github.com/user-attachments/assets/8ff241a4-e0da-4a78-9fc6-c4ceb3a9a5a9)

æ’ä»¶é…ç½®å¦‚å›¾æ‰€ç¤º,urlè¾“å…¥çš„æ˜¯"å¾ªç¯"èŠ‚ç‚¹å†…çš„å€¼ï¼š

![é…ç½®](https://github.com/user-attachments/assets/ea1f13e6-87e2-4f69-b272-5ef090144ac7)

#### 3.3.3 çˆ¬å–å†…å®¹å¤„ç†

å’Œå†…å®¹æ”¶è—å·¥ä½œæµä¸€æ ·ï¼Œæˆ‘ä»¬è¦å¯¹çˆ¬å–å†…å®¹åšå»é™¤ç®€å•markdownæ ¼å¼å¤„ç†å’Œæˆªå–æ–‡å­—ã€‚

ç‚¹å‡»"å¾ªç¯ä½“"è®©å®ƒå‘ˆé€‰ä¸­çŠ¶æ€å†ç‚¹å‡»æ·»åŠ "ä»£ç "èŠ‚ç‚¹ï¼Œé…ç½®å¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®å›¾](https://github.com/user-attachments/assets/fa019dcf-ded3-4128-8907-8cdc0733bfce)

```pythonä»£ç ```

```
import re
from typing import List, Tuple, Any
import json

async def main(args: Any) -> str:
    try:
        # ç›´æ¥ä½¿ç”¨ args["params"] è·å–å‚æ•°
        params = args["params"]
        
        # åˆå§‹åŒ–è¿”å›å€¼ä¸ºä¸€ä¸ªæ•°ç»„
        ret = []

        # 1. è·å–è¾“å…¥å‚æ•°ï¼Œå¹¶ç¡®ä¿æ˜¯å­—ç¬¦ä¸²
        raw_content = str(params["input"]["content"])
        title = str(params["input"]["title"])
        url = str(params["input"]["url"])

        # ç»Ÿè®¡åŸå§‹å­—ç¬¦æ•°é‡
        original_char_count = len(raw_content)

        # 2. ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç† Markdown è¶…é“¾æ¥ã€å›¾ç‰‡å’Œæ ¼å¼å­—ç¬¦
        def markdown_to_text(md: str) -> Tuple[str, List[str]]:
            # æå– URL
            urls = re.findall(r'\[.*?\]\((.*?)\)', md)
            # å»æ‰é“¾æ¥éƒ¨åˆ†ï¼Œä¿ç•™é“¾æ¥æ–‡æœ¬ï¼Œå»æ‰å›¾ç‰‡é“¾æ¥ï¼Œå»æ‰ Markdown çš„æ ¼å¼å­—ç¬¦ï¼Œå»æ‰å¤šä½™çš„æ¢è¡Œç¬¦
            md = re.sub(r'!\[.*?\]\(.*?\)|\[([^\]]+)\]\([^\)]+\)|[#*`-]|\n+', lambda m: '' if m.group(0).startswith('![') or m.group(0).startswith('[[') else (m.group(1) + ' ') if m.group(1) else '\n', md)
            return md.strip(), urls

        # è½¬æ¢ Markdown åˆ°æ™®é€šæ–‡æœ¬
        plain_text, extracted_urls = markdown_to_text(raw_content)

        # 3. å»é™¤å¤šä½™çš„æ¨ªçº¿ã€ç­‰å·ï¼Œå¹¶å¤„ç†æ¢è¡Œç¬¦å’Œç©ºç™½å­—ç¬¦
        stripped_content = re.sub(r'-{2,}|={2,}', '', plain_text)
        stripped_content = re.sub(r'\n+', '\n', stripped_content).strip()

        # 4. è®¡ç®—å»é™¤ Markdown åçš„å­—ç¬¦æ•°é‡
        clean_char_count = len(stripped_content)

        # 5. å¦‚æœå†…å®¹è¶…è¿‡ 1500 å­—ç¬¦ï¼Œåˆ™æˆªå–å‰ 1500 å­—ç¬¦
        stripped_content = stripped_content[:1500]

        # 6. æ·»åŠ å¤„ç†åçš„ç»“æœåˆ°è¿”å›å€¼åˆ—è¡¨
        ret.append({
            "plain_text": stripped_content
        })

        # 7. å°†è¿”å›å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¹¶ä½œä¸ºæœ€ç»ˆè¾“å‡º
        return json.dumps({"output": ret}, ensure_ascii=False)

    except Exception as e:
        return json.dumps({"error": str(e)}, ensure_ascii=False)
```

#### 3.3.4 å¤§æ¨¡å‹è¿›è¡Œé€æ¡ç¿»è¯‘

ç‚¹å‡»"å¾ªç¯ä½“"å‘ˆç°é€‰ä¸­çŠ¶æ€ï¼Œæ·»åŠ æˆ‘ä»¬è‡ªå®šä¹‰çš„å¤§æ¨¡å‹æ’ä»¶ã€‚è¾“å…¥æç¤ºè¯å’Œå¼•å…¥æˆ‘ä»¬éœ€è¦ç¿»è¯‘çš„å€¼ã€‚

![é…ç½®å›¾](https://github.com/user-attachments/assets/86243639-8b4c-4845-9065-6dcc72630454)

```æç¤ºè¯```

```
# ä»»åŠ¡\n æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œè¿›è¡Œç¿»è¯‘\n
# è¾“å‡ºæ ¼å¼è¦æ±‚\n
ç›´æ¥è¾“å‡ºåŸå§‹JSONæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•åŒ…è£…æˆ–ä»£ç å—ã€‚ ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼Œä¸æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹ï¼š\n {\n \"summary\": \"åœ¨è¿™é‡Œå¡«å†™å†…å®¹æ‘˜è¦\" }\n
# è¾“å‡ºå†…å®¹è¦æ±‚\n summaryï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„<plain_text>ï¼Œæ•æ‰å†…å®¹ä¸»é¢˜ã€é˜…è¯»ä»·å€¼ï¼Œç”Ÿæˆä¸€æ®µç®€æ´è€Œå…¨é¢çš„æ‘˜è¦ã€‚ä¸è¦ä½¿ç”¨\"æ‘˜è¦ï¼š\"æˆ–ç±»ä¼¼å‰ç¼€ã€‚ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ã€‚
# é‡è¦æé†’\n
- ä¸è¦ä½¿ç”¨jsonæˆ–ä»»ä½•å…¶ä»–ä»£ç å—æ ‡è®°\n
- ä¸è¦å°†è¾“å‡ºåŒ…è£…åœ¨\"answer\"æˆ–ä»»ä½•å…¶ä»–å­—æ®µä¸­\n
- ç¡®ä¿è¾“å‡ºçš„æ˜¯å¯ä»¥ç›´æ¥è¢«è§£æçš„åŸå§‹JSON\n
- é™¤äº†æŒ‡å®šçš„JSONç»“æ„å¤–ï¼Œä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–å†…å®¹
```

#### 3.3.5 åºåˆ—åŒ–å‡†å¤‡å†™å…¥é£ä¹¦è¡¨æ ¼

å’Œå†…å®¹æ”¶è—å·¥ä½œæµä¸€æ ·ï¼Œæˆ‘ä»¬è¦å¯¹å†™å…¥é£ä¹¦è¡¨æ ¼çš„æ•°æ®è¿›è¡Œä¸€ä¸ªåºåˆ—åŒ–å¤„ç†ã€‚ä¸ä¸Šä¸ªå·¥ä½œæµä¸åŒçš„æ˜¯ï¼Œæ­¤å¤„ä»£ç ï¼Œå¢åŠ äº†å»é™¤"summary"å­—ç¬¦å¤„ç†ã€‚

![é…ç½®å›¾1](https://github.com/user-attachments/assets/9bbe12fb-1ab5-4ec7-a4a7-5ecd242168a3)

![é…ç½®å›¾2](https://github.com/user-attachments/assets/e17959d5-370d-479f-88e8-4cda0d04f731)

```jsä»£ç ```

```
async function main({ params }: Args): Promise<Output> { 
    const contentMatch = params.content.match(/"summary":\s*"([^"]+)"/);
    const summary = contentMatch ? contentMatch[1] : ""; 

    const fields = {
        "æ ‡é¢˜":params.input["name"],
        "ç®€ä»‹":summary,
        "æ—¥æœŸ":params.time,
        "åœ°å€":params.input["url"],
        "language":params.input["language"]

    };
    const ret = {
        output: [
            { fields }
        ]
    };

    return ret;
}

```

#### 3.3.6 å†™å…¥é£ä¹¦è¡¨æ ¼

ç‚¹å‡»"å¾ªç¯ä½“"è®©å®ƒå‘ˆé€‰ä¸­çŠ¶æ€å†ç‚¹å‡»æ·»åŠ "å†™å…¥é£ä¹¦å¤šç»´è¡¨æ ¼"æ’ä»¶ï¼Œé…ç½®å¦‚å›¾æ‰€ç¤ºï¼š

![é…ç½®å›¾](https://github.com/user-attachments/assets/6f1466a4-f657-440c-b8e8-17126562d08b)

#### 3.3.7 é…ç½®è¾“å‡º

ç»™å¾ªç¯èŠ‚ç‚¹é…ç½®ä¸€ä¸ªè¾“å‡ºå˜é‡ï¼Œä¸»è¦æ–¹ä¾¿æŸ¥çœ‹æ˜¯å¦å†™å…¥æˆåŠŸã€‚

![è¾“å‡ºé…ç½®1](https://github.com/user-attachments/assets/276af147-b069-4402-9d2a-b32edbfc74ae)

![è¾“å‡ºé…ç½®2](https://github.com/user-attachments/assets/70352811-8a68-42ac-88cf-04670a7cc7c9)

#### 3.3.8 æµ‹è¯•ç»“æœ

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/d4a1c410-8025-4932-b554-284a81330482)

### 3.4 å®šæ—¶å¤„ç†å·¥ä½œæµå¹¶å‘é€æœºå™¨äºº

#### 3.4.1 è§¦å‘å™¨è®¾ç½®

ç‚¹å‡»è¿›å…¥boté¡µé¢ï¼Œé¦–å…ˆæ·»åŠ æˆ‘ä»¬åˆšåˆšå‘å¸ƒçš„å·¥ä½œæµï¼Œç„¶åç‚¹å‡»"æ–°å»ºè§¦å‘å™¨"

![æ–°å»ºå®šæ—¶å™¨](https://github.com/user-attachments/assets/deae2602-56d6-4263-bcb3-6bc0cad95434)

æˆ‘æƒ³è¦çš„æ˜¯æ¯å‘¨ä¸€å…«ç‚¹ç»™æˆ‘è¿›è¡Œå½•å…¥å’Œæ¨é€ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œé€‰æ‹©ä»€ä¹ˆæ—¶é—´æ®µï¼Œä¸ºäº†æµ‹è¯•çœ‹ç»“æœï¼Œå…ˆé€‰æ‹©ä¸€ä¸ªå°±è¿‘æ—¶é—´æ—¶é—´ï¼Œè¦è€ƒè™‘åŠ å…¥å®¡æ ¸æ—¶é—´ï¼Œå¤§æ¦‚é€‰æ‹©1-2håå·®ä¸å¤šã€‚

è¿™é‡Œæˆ‘ä»¬çš„ä»»åŠ¡æ‰§è¡Œé€‰æ‹©å·¥ä½œæµã€‚è®¾ç½®å¦‚å›¾æ‰€ç¤ºã€‚

![è§¦å‘å™¨è®¾ç½®](https://github.com/user-attachments/assets/cb6e5539-555a-499d-8261-5b5dcf2bbce7)

#### 3.4.2 å‘å¸ƒ

è®¾ç½®å®Œæˆåä¸€å®šè¦ç‚¹å‡»å‘å¸ƒã€‚

![å‘å¸ƒ](https://github.com/user-attachments/assets/8a67e412-a57d-40bc-ad72-80970ddf2027)

#### 3.4.3 æµ‹è¯•ç»“æœ

è§¦å‘æˆåŠŸï¼Œè™½ç„¶æœºå™¨äººå›å¤æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¾æ—§æˆåŠŸå†™å…¥é£ä¹¦è¡¨æ ¼

![æˆåŠŸç»“æœ](https://github.com/user-attachments/assets/3ae3d6d2-407c-4af7-a571-6ab8ea593faf)


# å…«ã€é£ä¹¦åº”ç”¨ã€æœºå™¨äººç›¸å…³è¡¥å……

## 1. å¦‚ä½•åˆ é™¤å¼ƒç”¨çš„é£ä¹¦åº”ç”¨

ç™»å½•[é£ä¹¦ç®¡ç†åå°](https://feishu.cn/admin),ç‚¹å‡»"åº”ç”¨ç®¡ç†"ï¼Œç­›é€‰å¼€å‘è€…ä¸ºä¼ä¸šå†…æˆå‘˜ï¼ˆä¸ªäººè´¦å·å°±ç­›é€‰ä¸ªäººï¼‰ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»åˆ›å»ºçš„åº”ç”¨ã€‚

![é£ä¹¦åº”ç”¨åˆ—è¡¨](https://github.com/user-attachments/assets/789c7f78-6f4d-4438-bc83-f391d7d5b845)

ç‚¹å‡»"é…ç½®"ï¼Œåœç”¨åº”ç”¨ã€‚

![åœç”¨åº”ç”¨](https://github.com/user-attachments/assets/f1363c70-595a-4dd0-8b2f-94a69ad3e561)

ç™»å½•[é£ä¹¦å¼€å‘è€…åå°](https://open.feishu.cn/app),ç‚¹å‡»è¿›å…¥è¦åˆ é™¤çš„åº”ç”¨ï¼Œåœ¨"å‡­è¯ä¿¡æ¯"é¡µé¢ä¸‹æ‹‰ï¼Œç‚¹å‡»åˆ é™¤ã€‚

![åœç”¨éƒ¨åˆ†åº”ç”¨ååˆ—è¡¨](https://github.com/user-attachments/assets/fb48ba63-6bbd-4434-b0f6-40037d48eb4e)

![åˆ é™¤åº”ç”¨](https://github.com/user-attachments/assets/9ad0e338-7144-4e9b-859e-7cb74970c476)

## 2. å¦‚ä½•å¤šäººä½¿ç”¨åŒä¸€æœºå™¨äººï¼ˆä»…é™åŒä¸€ç»„ç»‡ï¼‰

æ–°å»ºç¾¤ç»„ï¼Œæ·»åŠ ç¾¤æˆå‘˜å’Œç¾¤æœºå™¨äººã€‚ä»¥ä¸‹æ¼”ç¤ºè´¦å·ä¸ºä¼ä¸šè´¦å·ï¼Œä¸ªäººè´¦å·æ­¥éª¤ç›¸åŒã€‚

### 2.1 ä¸ºåº”ç”¨æ·»åŠ æœºå™¨äºº

ç‚¹å‡»ç™»å½•[é£ä¹¦å¼€å‘è€…åå°](https://open.feishu.cn/app)ï¼Œé€‰æ‹©åº”ç”¨ã€‚æˆªå›¾æ˜¯ä¸ªäººè´¦å·æ·»åŠ æƒ…å†µï¼Œä¼ä¸šè´¦å·æ— éœ€æ‰‹åŠ¨æ·»åŠ ã€‚

![ä¸ªäººè´¦å·æ·»åŠ æœºå™¨äºº](https://github.com/user-attachments/assets/2c33c771-2f79-4e22-81c6-371210f5eb46)

æ·»åŠ å®Œæˆåéœ€è¦å‘å¸ƒç‰ˆæœ¬ã€‚

![å‘å¸ƒç‰ˆæœ¬](https://github.com/user-attachments/assets/00285964-3104-405b-b308-689fbe9242fe)

### 2.2 æ–°å»ºç¾¤ç»„å¹¶æ·»åŠ ç¾¤æœºå™¨äºº

æ‰“å¼€é£ä¹¦ï¼Œç‚¹å‡»"é€šè®¯å½•" > "ç¾¤ç»„" > "æ–°å»ºç¾¤ç»„" > æ·»åŠ "ç¾¤æœºå™¨äºº"

![æ–°å»ºç¾¤ç»„](https://github.com/user-attachments/assets/02ca8de2-7127-4cef-b347-3152fbac883e)

![æ–°å»ºç¾¤æœºå™¨äººä½ç½®](https://github.com/user-attachments/assets/eb696bbb-bd80-44c6-a146-0a7a4b61e251)

![æ·»åŠ ç¾¤æœºå™¨äºº](https://github.com/user-attachments/assets/09f83143-789b-4b7b-ba21-110c830fa6e8)

### 2.3 å¦‚ä½•ä½¿ç”¨ç¾¤æœºå™¨äºº

#### 2.3.1 åœ¨è¾“å…¥æ¡†å†…@æœºå™¨äººå‘é€ä¿¡æ¯

![@æœºå™¨äºº](https://github.com/user-attachments/assets/e2b59951-2155-4b63-bc35-da951146b3f4)

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/c61db1f6-df4f-438b-a469-a6dd074574c2)

ç°åœ¨æ·»åŠ ä¸€ä¸ªç»„ç»‡å†…çš„æˆå‘˜æ¥åˆ‡æ¢èº«ä»½æµ‹è¯•ä¸‹ã€‚

![æ·»åŠ ç»„ç»‡å†…æˆå‘˜æµ‹è¯•](https://github.com/user-attachments/assets/0478b2d6-f801-4484-869e-ffc2c39323a4)

ç¬¬ä¸€æ¬¡ä¼šè¦æ±‚æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªæˆæƒã€‚

![æˆæƒ](https://github.com/user-attachments/assets/027e8608-2143-4c4e-95ec-270e79d1a5c9)

![æ·»åŠ æˆåŠŸ](https://github.com/user-attachments/assets/c74619e7-e9fa-4020-81b2-967a412362a0)

æˆ‘ä»¬æ‰“å¼€é£ä¹¦è¡¨æ ¼çœ‹ä¸‹ï¼Œ2æ¬¡æ·»åŠ æ˜¯å¦æˆåŠŸã€‚

![é£ä¹¦è¡¨æ ¼éªŒè¯](https://github.com/user-attachments/assets/6362c208-c699-42bb-8377-80857f63e918)

#### 2.3.2 ç‚¹å‡»å¤´åƒç§èŠ

![ç‚¹å‡»å¤´åƒç§èŠ](https://github.com/user-attachments/assets/0ad7d523-bd78-4fbd-adcd-002c08c2653b)

## 3. å¯¹å¤–å…±äº«æœºå™¨äººï¼ˆä¸æ˜¯åŒä¸€ç»„ç»‡çš„ï¼‰

åœºæ™¯æè¿°ï¼šä¼ä¸šåœ¨è¿›è¡Œä¸šåŠ¡æ²Ÿé€šæ—¶ï¼Œå¯èƒ½é¢ä¸´è·¨ç§Ÿæˆ·æ²Ÿé€šçš„åœºæ™¯ã€‚ä¾‹å¦‚ä¸Šä¸‹æ¸¸ä¼ä¸šçš„æˆå‘˜æ²Ÿé€šã€ä¼ä¸šä¸å¤–éƒ¨å®¢æˆ·ä¹‹é—´çš„æ²Ÿé€šç­‰ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œä¼ä¸šå¯ä»¥å¼€å‘ä¸€ä¸ªå…è®¸å¯¹å¤–å…±äº«çš„æœºå™¨äººï¼Œåˆ©ç”¨æœºå™¨äººèƒ½åŠ›é«˜æ•ˆå®Œæˆæ²Ÿé€šåä½œã€‚å¼€å¯å¯¹å¤–å…±äº«çš„æœºå™¨äººæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

- æ·»åŠ åœ¨å¤–éƒ¨ç¾¤ï¼Œå®ç°æ‹‰äººå…¥ç¾¤ã€æ¨é€æ¶ˆæ¯ã€å“åº”ç¾¤æˆå‘˜æ¶ˆæ¯ç­‰åŠŸèƒ½ã€‚
- ä¸å¤–éƒ¨ç”¨æˆ·å•èŠã€‚é€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹å®ç°ç”¨æˆ·å¯èƒ½é¢ä¸´çš„äº§å“åŠŸèƒ½åé¦ˆã€ä¸šåŠ¡è¿›å±•é€šçŸ¥ç­‰éœ€è¦ã€‚

å‰æå¿…é¡»æ˜¯ï¼šè®¤è¯è¿‡çš„ä¼ä¸šå·ã€‚

### 3.1 ä¼ä¸šè®¤è¯

ç™»å½•[é£ä¹¦ç®¡ç†åå°](https://feishu.cn/admin)ï¼Œç‚¹å‡»"ä¼ä¸šè®¾ç½®" > "ä¼ä¸šä¿¡æ¯"è¿›è¡Œè®¤è¯ã€‚

ä¼ä¸šè‡ªå»ºåº”ç”¨çš„å¯¹å¤–å…±äº«ä»…æ”¯æŒè®¤è¯ç§Ÿæˆ·ä½¿ç”¨ã€‚è®¤è¯æ—¶é•¿1-2ä¸ªå·¥ä½œæ—¥ï¼ˆå®é™…å¤§æ¦‚1-2hå·¦å³ï¼‰ï¼Œå¯ä»¥é€‰æ‹©3ç§æ–¹å¼è®¤è¯ã€‚

![ä¼ä¸šè®¤è¯æ–¹å¼](https://github.com/user-attachments/assets/cb113d4e-6a04-4c47-be65-e3a646931a43)

![è®¤è¯æˆåŠŸ](https://github.com/user-attachments/assets/8fd72f5f-7dc4-499b-aa9d-8dc212f2dedf)

### 3.2 å¯¹å¤–å…±äº«

è®¤è¯å®Œæˆåï¼Œç™»å½•[é£ä¹¦å¼€å‘è€…åå°](https://open.feishu.cn/app)ã€‚ç‚¹å‡»æƒ³è¦å…±äº«çš„æœºå™¨äººï¼Œåœ¨åº”ç”¨å·¦ä¾§å¯¼èˆªæ ï¼Œé€‰æ‹© åº”ç”¨å‘å¸ƒ > ç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€‚

åœ¨ "ç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒ" é¡µé¢å³ä¸Šè§’ï¼Œç‚¹å‡» åˆ›å»ºç‰ˆæœ¬ã€‚

åœ¨ "ç‰ˆæœ¬è¯¦æƒ…" é¡µé¢é€‰ä¸­ "å…è®¸æœºå™¨äººè¢«æ·»åŠ åˆ°å¤–éƒ¨ç¾¤ä¸­ä½¿ç”¨"ã€‚

![å¯¹å¤–å…±äº«](https://github.com/user-attachments/assets/33f90c6d-4555-4ffe-bc83-574a22e286ce)

ç™»å½•[é£ä¹¦ç®¡ç†åå°](https://feishu.cn/admin)ï¼Œå¯ä»¥çœ‹åˆ°åº”ç”¨å®¡æ ¸å·²ç»æœ‰å¾…åŠæ¶ˆæ¯äº†ã€‚

![é£ä¹¦ç®¡ç†åå°](https://github.com/user-attachments/assets/95e74c37-5a34-4d70-be3d-bc7c36f00a74)

ç‚¹å‡»é€šè¿‡åä¼šæœ‰æ¶ˆæ¯å¼¹çª—ã€‚

![æˆæƒæˆåŠŸå¼¹çª—](https://github.com/user-attachments/assets/9136d407-2115-4615-8501-2279a12f7d3e)

ï¼ˆè¡¥å……ï¼‰æƒ³å…å®¡çš„è¯ï¼Œå°±é€‰æ‹©"è®¾ç½®å®¡æ ¸è§„åˆ™"

![è®¾ç½®å®¡æ ¸è§„åˆ™](https://github.com/user-attachments/assets/70072056-ecbb-4164-b6fb-575b2f70c06a)

### 3.3 å¯¹å¤–å…±äº«æœºå™¨äººæµ‹è¯•

æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå¤–éƒ¨ç¾¤ç»„ã€‚

![æ–°å»ºå¤–éƒ¨ç¾¤ç»„](https://github.com/user-attachments/assets/35e0cc6f-3ef7-444d-a9e3-8750b6f1f99e)

æ·»åŠ ç¾¤æœºå™¨äººã€‚

![æ·»åŠ ç¾¤æœºå™¨äºº](https://github.com/user-attachments/assets/2da7a74f-66f9-4447-b510-b7a8d1b64cc1)

åˆ‡æ¢è´¦å·æ¥æµ‹è¯•ä¸‹ã€‚ä¾æ—§æ˜¯åˆæ¬¡ä½¿ç”¨è¦æˆæƒã€‚

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/b0f81c80-919a-446f-822b-268141e2c1c5)

çœ‹ä¸‹é£ä¹¦è¡¨æ ¼ï¼Œå†…å®¹å·²ç»è¿›æ¥äº†ã€‚

![é£ä¹¦è¡¨æ ¼](https://github.com/user-attachments/assets/b695eaec-d060-4643-b854-6452eca95d4b)

